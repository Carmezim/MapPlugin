{"version":3,"file":"maps.bundle.js","sources":["../../src/components/searchBox/createSearchBox.js","../../src/components/searchBox/searchBox.js","../../node_modules/clusterize.js/clusterize.js","../../src/components/map/svgMarkers.js","../../src/components/map/mapStyles.js","../../src/components/map/options.js","../../src/components/buildList/buildList.js","../../src/components/fetchData/checkData.js","../../src/components/fetchData/getRandom.js","../../src/components/map/markerclusterer.js","../../src/polyfills/promise-polyfill.js","../../src/components/fetchData/fetchData.js","../../src/components/map/createMap.js","../../src/components/map/defineCenter.js","../../src/components/characters/iconsList.js","../../node_modules/whatwg-fetch/fetch.js","../../src/components/characters/placeCharacters.js","../../src/components/map/map.js"],"sourcesContent":["const $ = window.jQuery;\n\nconst createSearchBox = (map, mapWrapper) => {\n\tlet localMap = map;\n\t// Create search box and link it to UI\n\tconst $input = $(mapWrapper).find('input.shiftmap-input');\n\tconst input = $input.get(0);\n\tconst searchBox = new google.maps.places.SearchBox(input);\n\treturn searchBox;\n};\n\nexport default createSearchBox;\n","const searchBox = (map, places, sBox, placeMarkers, icon, setIcon) => {\n\n\t// Bias searchbox results towards current map's viewport\n\tmap.addListener('bounds_changed', function() {\n\t\tsBox.setBounds(map.getBounds());\n\t});\n\n\t// Listen for the event fired when the user selects a prediction and retrieve\n\t// more details for that place.\n\tsBox.addListener('places_changed', function() {\n\t\tplaces = sBox.getPlaces();\n\t\tif (places.length == 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clear out the old markers.\n\t\tplaceMarkers.forEach(function(marker) {\n\t\t\tmarker.setMap(null);\n\t\t});\n\t\tplaceMarkers = [];\n\n\t\t// For each place, get the icon, name and location.\n\t\tlet bounds = new google.maps.LatLngBounds();\n\t\tplaces.forEach(function(place) {\n\t\t\tif (!place.geometry) {\n\t\t\t\tconsole.log(\"Returned place contains no geometry\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet newIcon = {\n\t\t\t\turl: place.icon,\n\t\t\t\tsize: icon.size,\n\t\t\t\torigin: icon.origin,\n\t\t\t\tanchor: icon.anchor,\n\t\t\t\tscaledSize: icon.scaledSize\n\t\t\t};\n\n\t\t\tlet placeIcon = setIcon(newIcon);\n\n\t\t\tplaceMarkers.push(new google.maps.Marker({\n\t\t\t\tmap: map,\n\t\t\t\ticon: placeIcon,\n\t\t\t\ttitle: place.name,\n\t\t\t\tposition: place.geometry.location,\n\t\t\t\tsetMap: map\n\t\t\t}));\n\n\t\t\tif (place.geometry.viewport) {\n\t\t\t\t// Only geocodes have viewport.\n\t\t\t\tbounds.union(place.geometry.viewport);\n\t\t\t} else {\n\t\t\t\tbounds.extend(place.geometry.location);\n\t\t\t}\n\t\t});\n\t\tmap.fitBounds(bounds);\n\t});\n};\nexport default searchBox;\n","/*! Clusterize.js - v0.17.6 - 2017-03-05\n* http://NeXTs.github.com/Clusterize.js/\n* Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(name, definition) {\n    if (typeof module != 'undefined') module.exports = definition();\n    else if (typeof define == 'function' && typeof define.amd == 'object') define(definition);\n    else this[name] = definition();\n}('Clusterize', function() {\n  \"use strict\"\n\n  // detect ie9 and lower\n  // https://gist.github.com/padolsey/527683#comment-786682\n  var ie = (function(){\n    for( var v = 3,\n             el = document.createElement('b'),\n             all = el.all || [];\n         el.innerHTML = '<!--[if gt IE ' + (++v) + ']><i><![endif]-->',\n         all[0];\n       ){}\n    return v > 4 ? v : document.documentMode;\n  }()),\n  is_mac = navigator.platform.toLowerCase().indexOf('mac') + 1;\n  var Clusterize = function(data) {\n    if( ! (this instanceof Clusterize))\n      return new Clusterize(data);\n    var self = this;\n\n    var defaults = {\n      rows_in_block: 50,\n      blocks_in_cluster: 4,\n      tag: null,\n      show_no_data_row: true,\n      no_data_class: 'clusterize-no-data',\n      no_data_text: 'No data',\n      keep_parity: true,\n      callbacks: {}\n    }\n\n    // public parameters\n    self.options = {};\n    var options = ['rows_in_block', 'blocks_in_cluster', 'show_no_data_row', 'no_data_class', 'no_data_text', 'keep_parity', 'tag', 'callbacks'];\n    for(var i = 0, option; option = options[i]; i++) {\n      self.options[option] = typeof data[option] != 'undefined' && data[option] != null\n        ? data[option]\n        : defaults[option];\n    }\n\n    var elems = ['scroll', 'content'];\n    for(var i = 0, elem; elem = elems[i]; i++) {\n      self[elem + '_elem'] = data[elem + 'Id']\n        ? document.getElementById(data[elem + 'Id'])\n        : data[elem + 'Elem'];\n      if( ! self[elem + '_elem'])\n        throw new Error(\"Error! Could not find \" + elem + \" element\");\n    }\n\n    // tabindex forces the browser to keep focus on the scrolling list, fixes #11\n    if( ! self.content_elem.hasAttribute('tabindex'))\n      self.content_elem.setAttribute('tabindex', 0);\n\n    // private parameters\n    var rows = isArray(data.rows)\n        ? data.rows\n        : self.fetchMarkup(),\n      cache = {},\n      scroll_top = self.scroll_elem.scrollTop;\n\n    // append initial data\n    self.insertToDOM(rows, cache);\n\n    // restore the scroll position\n    self.scroll_elem.scrollTop = scroll_top;\n\n    // adding scroll handler\n    var last_cluster = false,\n    scroll_debounce = 0,\n    pointer_events_set = false,\n    scrollEv = function() {\n      // fixes scrolling issue on Mac #3\n      if (is_mac) {\n          if( ! pointer_events_set) self.content_elem.style.pointerEvents = 'none';\n          pointer_events_set = true;\n          clearTimeout(scroll_debounce);\n          scroll_debounce = setTimeout(function () {\n              self.content_elem.style.pointerEvents = 'auto';\n              pointer_events_set = false;\n          }, 50);\n      }\n      if (last_cluster != (last_cluster = self.getClusterNum()))\n        self.insertToDOM(rows, cache);\n      if (self.options.callbacks.scrollingProgress)\n        self.options.callbacks.scrollingProgress(self.getScrollProgress());\n    },\n    resize_debounce = 0,\n    resizeEv = function() {\n      clearTimeout(resize_debounce);\n      resize_debounce = setTimeout(self.refresh, 100);\n    }\n    on('scroll', self.scroll_elem, scrollEv);\n    on('resize', window, resizeEv);\n\n    // public methods\n    self.destroy = function(clean) {\n      off('scroll', self.scroll_elem, scrollEv);\n      off('resize', window, resizeEv);\n      self.html((clean ? self.generateEmptyRow() : rows).join(''));\n    }\n    self.refresh = function(force) {\n      if(self.getRowsHeight(rows) || force) self.update(rows);\n    }\n    self.update = function(new_rows) {\n      rows = isArray(new_rows)\n        ? new_rows\n        : [];\n      var scroll_top = self.scroll_elem.scrollTop;\n      // fixes #39\n      if(rows.length * self.options.item_height < scroll_top) {\n        self.scroll_elem.scrollTop = 0;\n        last_cluster = 0;\n      }\n      self.insertToDOM(rows, cache);\n      self.scroll_elem.scrollTop = scroll_top;\n    }\n    self.clear = function() {\n      self.update([]);\n    }\n    self.getRowsAmount = function() {\n      return rows.length;\n    }\n    self.getScrollProgress = function() {\n      return this.options.scroll_top / (rows.length * this.options.item_height) * 100 || 0;\n    }\n\n    var add = function(where, _new_rows) {\n      var new_rows = isArray(_new_rows)\n        ? _new_rows\n        : [];\n      if( ! new_rows.length) return;\n      rows = where == 'append'\n        ? rows.concat(new_rows)\n        : new_rows.concat(rows);\n      self.insertToDOM(rows, cache);\n    }\n    self.append = function(rows) {\n      add('append', rows);\n    }\n    self.prepend = function(rows) {\n      add('prepend', rows);\n    }\n  }\n\n  Clusterize.prototype = {\n    constructor: Clusterize,\n    // fetch existing markup\n    fetchMarkup: function() {\n      var rows = [], rows_nodes = this.getChildNodes(this.content_elem);\n      while (rows_nodes.length) {\n        rows.push(rows_nodes.shift().outerHTML);\n      }\n      return rows;\n    },\n    // get tag name, content tag name, tag height, calc cluster height\n    exploreEnvironment: function(rows, cache) {\n      var opts = this.options;\n      opts.content_tag = this.content_elem.tagName.toLowerCase();\n      if( ! rows.length) return;\n      if(ie && ie <= 9 && ! opts.tag) opts.tag = rows[0].match(/<([^>\\s/]*)/)[1].toLowerCase();\n      if(this.content_elem.children.length <= 1) cache.data = this.html(rows[0] + rows[0] + rows[0]);\n      if( ! opts.tag) opts.tag = this.content_elem.children[0].tagName.toLowerCase();\n      this.getRowsHeight(rows);\n    },\n    getRowsHeight: function(rows) {\n      var opts = this.options,\n        prev_item_height = opts.item_height;\n      opts.cluster_height = 0;\n      if( ! rows.length) return;\n      var nodes = this.content_elem.children;\n      var node = nodes[Math.floor(nodes.length / 2)];\n      opts.item_height = node.offsetHeight;\n      // consider table's border-spacing\n      if(opts.tag == 'tr' && getStyle('borderCollapse', this.content_elem) != 'collapse')\n        opts.item_height += parseInt(getStyle('borderSpacing', this.content_elem), 10) || 0;\n      // consider margins (and margins collapsing)\n      if(opts.tag != 'tr') {\n        var marginTop = parseInt(getStyle('marginTop', node), 10) || 0;\n        var marginBottom = parseInt(getStyle('marginBottom', node), 10) || 0;\n        opts.item_height += Math.max(marginTop, marginBottom);\n      }\n      opts.block_height = opts.item_height * opts.rows_in_block;\n      opts.rows_in_cluster = opts.blocks_in_cluster * opts.rows_in_block;\n      opts.cluster_height = opts.blocks_in_cluster * opts.block_height;\n      return prev_item_height != opts.item_height;\n    },\n    // get current cluster number\n    getClusterNum: function () {\n      this.options.scroll_top = this.scroll_elem.scrollTop;\n      return Math.floor(this.options.scroll_top / (this.options.cluster_height - this.options.block_height)) || 0;\n    },\n    // generate empty row if no data provided\n    generateEmptyRow: function() {\n      var opts = this.options;\n      if( ! opts.tag || ! opts.show_no_data_row) return [];\n      var empty_row = document.createElement(opts.tag),\n        no_data_content = document.createTextNode(opts.no_data_text), td;\n      empty_row.className = opts.no_data_class;\n      if(opts.tag == 'tr') {\n        td = document.createElement('td');\n        // fixes #53\n        td.colSpan = 100;\n        td.appendChild(no_data_content);\n      }\n      empty_row.appendChild(td || no_data_content);\n      return [empty_row.outerHTML];\n    },\n    // generate cluster for current scroll position\n    generate: function (rows, cluster_num) {\n      var opts = this.options,\n        rows_len = rows.length;\n      if (rows_len < opts.rows_in_block) {\n        return {\n          top_offset: 0,\n          bottom_offset: 0,\n          rows_above: 0,\n          rows: rows_len ? rows : this.generateEmptyRow()\n        }\n      }\n      var items_start = Math.max((opts.rows_in_cluster - opts.rows_in_block) * cluster_num, 0),\n        items_end = items_start + opts.rows_in_cluster,\n        top_offset = Math.max(items_start * opts.item_height, 0),\n        bottom_offset = Math.max((rows_len - items_end) * opts.item_height, 0),\n        this_cluster_rows = [],\n        rows_above = items_start;\n      if(top_offset < 1) {\n        rows_above++;\n      }\n      for (var i = items_start; i < items_end; i++) {\n        rows[i] && this_cluster_rows.push(rows[i]);\n      }\n      return {\n        top_offset: top_offset,\n        bottom_offset: bottom_offset,\n        rows_above: rows_above,\n        rows: this_cluster_rows\n      }\n    },\n    renderExtraTag: function(class_name, height) {\n      var tag = document.createElement(this.options.tag),\n        clusterize_prefix = 'clusterize-';\n      tag.className = [clusterize_prefix + 'extra-row', clusterize_prefix + class_name].join(' ');\n      height && (tag.style.height = height + 'px');\n      return tag.outerHTML;\n    },\n    // if necessary verify data changed and insert to DOM\n    insertToDOM: function(rows, cache) {\n      // explore row's height\n      if( ! this.options.cluster_height) {\n        this.exploreEnvironment(rows, cache);\n      }\n      var data = this.generate(rows, this.getClusterNum()),\n        this_cluster_rows = data.rows.join(''),\n        this_cluster_content_changed = this.checkChanges('data', this_cluster_rows, cache),\n        top_offset_changed = this.checkChanges('top', data.top_offset, cache),\n        only_bottom_offset_changed = this.checkChanges('bottom', data.bottom_offset, cache),\n        callbacks = this.options.callbacks,\n        layout = [];\n\n      if(this_cluster_content_changed || top_offset_changed) {\n        if(data.top_offset) {\n          this.options.keep_parity && layout.push(this.renderExtraTag('keep-parity'));\n          layout.push(this.renderExtraTag('top-space', data.top_offset));\n        }\n        layout.push(this_cluster_rows);\n        data.bottom_offset && layout.push(this.renderExtraTag('bottom-space', data.bottom_offset));\n        callbacks.clusterWillChange && callbacks.clusterWillChange();\n        this.html(layout.join(''));\n        this.options.content_tag == 'ol' && this.content_elem.setAttribute('start', data.rows_above);\n        callbacks.clusterChanged && callbacks.clusterChanged();\n      } else if(only_bottom_offset_changed) {\n        this.content_elem.lastChild.style.height = data.bottom_offset + 'px';\n      }\n    },\n    // unfortunately ie <= 9 does not allow to use innerHTML for table elements, so make a workaround\n    html: function(data) {\n      var content_elem = this.content_elem;\n      if(ie && ie <= 9 && this.options.tag == 'tr') {\n        var div = document.createElement('div'), last;\n        div.innerHTML = '<table><tbody>' + data + '</tbody></table>';\n        while((last = content_elem.lastChild)) {\n          content_elem.removeChild(last);\n        }\n        var rows_nodes = this.getChildNodes(div.firstChild.firstChild);\n        while (rows_nodes.length) {\n          content_elem.appendChild(rows_nodes.shift());\n        }\n      } else {\n        content_elem.innerHTML = data;\n      }\n    },\n    getChildNodes: function(tag) {\n        var child_nodes = tag.children, nodes = [];\n        for (var i = 0, ii = child_nodes.length; i < ii; i++) {\n            nodes.push(child_nodes[i]);\n        }\n        return nodes;\n    },\n    checkChanges: function(type, value, cache) {\n      var changed = value != cache[type];\n      cache[type] = value;\n      return changed;\n    }\n  }\n\n  // support functions\n  function on(evt, element, fnc) {\n    return element.addEventListener ? element.addEventListener(evt, fnc, false) : element.attachEvent(\"on\" + evt, fnc);\n  }\n  function off(evt, element, fnc) {\n    return element.removeEventListener ? element.removeEventListener(evt, fnc, false) : element.detachEvent(\"on\" + evt, fnc);\n  }\n  function isArray(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  }\n  function getStyle(prop, elem) {\n    return window.getComputedStyle ? window.getComputedStyle(elem)[prop] : elem.currentStyle[prop];\n  }\n\n  return Clusterize;\n}));","// Cluster markers SVG\nconst Symbol = (id, width, height, fill) => {\n\tconst marker_svg = {\n\t\tmarker: {\n\t\t\tp: 'M244.31,0C256.87,2.49,269.59,4.38,282,7.58c35.11,9.1,65.15,27.29,90.44,53.07C401.19,90,419.56,125,427,165.51q12.58,68.25-18.92,130.11Q319.47,469.54,230.64,643.36c-.73,1.42-1.59,2.78-2.79,4.87-1.41-2.43-2.5-4.14-3.42-5.93C165.11,526,104.62,410.27,46.93,293.17,8.94,216.08,18.43,141.32,71.6,74c34-43,80.17-66.6,134.87-72.86A44.62,44.62,0,0,0,211.37,0Z',\n\t\t\tv: \"0 0 430.62 648.23\"\n\t\t}\n\t};\n\treturn ('data:image/svg+xml;base64,' + window.btoa('<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"' + height + '\" viewBox=\"0 0 430.62 648.23\" width=\"' + width + '\" ><g><path fill=\"' + fill + '\" d=\"' + marker_svg[id].p + '\" /></g></svg>'));\n};\n\nexport default Symbol;","// Map colors\nconst land = \"#EEEFF1\";\nconst water = \"#71CAF2\";\n\nconst mapStyles = [\n\t\t{\n\t\t\t\"elementType\": \"labels\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"administrative\",\n\t\t\t\"elementType\": \"geometry\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"administrative.land_parcel\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"administrative.neighborhood\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"landscape.man_made\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"color\": land\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"landscape.natural\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"color\": land\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"landscape.natural.landcover\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"color\": land\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"landscape.natural.terrain\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"color\": land\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"poi\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"road\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"road\",\n\t\t\t\"elementType\": \"labels.icon\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"transit\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"visibility\": \"off\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"featureType\": \"water\",\n\t\t\t\"stylers\": [\n\t\t\t\t{\n\t\t\t\t\t\"color\": water\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t];\n\nexport default mapStyles;\n","import Symbol from './svgMarkers';\nimport mapStyles from './mapStyles';\n\n// Map options\nconst mapOptions = {\n\tzoom: 3,\n\tcenter: null,\n\tmapTypeId: google.maps.MapTypeId.ROADMAP,\n\tmapTypeControl: false,\n\tstyles: mapStyles,\n\tminZoom: 3\n};\n\n// Cluster markers style\nconst clusterStyles = [\n\t{\n\t\tanchor: [13, 35],\n\t\ttextColor: 'white',\n\t\ttextSize: '16',\n\t\turl: Symbol('marker', 75, 75, '#f16667'),\n\t\theight: 75,\n\t\twidth: 75,\n\t},\n\t{\n\t\tanchor: [20, 42],\n\t\ttextColor: 'white',\n\t\ttextSize: '18',\n\t\turl: Symbol('marker', 100, 100, '#f16667'),\n\t\theight: 100,\n\t\twidth: 100,\n\t},\n\t{\n\t\tanchor: [20, 43.5],\n\t\ttextColor: 'white',\n\t\ttextSize: '24',\n\t\turl: Symbol('marker', 125, 125, '#f16667'),\n\t\theight: 125,\n\t\twidth: 125,\n\t},\n];\n\n// Cluster options\nconst clusterOptions = {\n\tmaxZoom: 15,\n\tgridSize: 75,\n\tstyles: clusterStyles,\n};\n\n// Set new icon\nconst setIcon = (newIcon) => {\n\ticon = newIcon;\n\treturn icon;\n};\n\nconst addCenterToOptions = (center) => {\n\tmapOptions.center = center;\n};\n\n// Icon\nlet icon = {\n\turl: Symbol('marker', 25, 25, '#f16667'),\n\tsize: new google.maps.Size(71, 71),\n\torigin: new google.maps.Point(0, 0),\n\tanchor: new google.maps.Point(17, 34),\n\tscaledSize: new google.maps.Size(25, 25),\n};\n\nexport {\n\ticon,\n\tmapOptions,\n\tclusterOptions,\n\tsetIcon,\n\taddCenterToOptions,\n};\n","const buildList = (clusterize, listArray, markers, localMap) => {\n\tlistArray = [];\n\tclusterize.clear();\n\n\tmarkers.map((user) => {\n\t\tif (localMap.getBounds().contains(user.getPosition())) {\n\t\t\tlistArray.push(\n\t\t\t`<div class=\"shiftmap-clusterize-user-row shiftmap-clusterize-user-row-${user.userID}\">\n\t\t\t\t<div class=\"shiftmap-clusterize-user-cell\">\n\t\t\t\t\t<div class=\"shiftmap-clusterize-avatar\">\n\t\t\t\t\t\t<img src=\"${user.url}\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"shiftmap-clusterize-content\">\n\t\t\t\t\t\t<h3 class=\"shiftmap-clusterize-user-name\">${user.userName}</h3>\n\t\t\t\t\t\t<button class=\"shiftmap-clusterize-user-button\" name=\"follow\">Follow</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>`\n\t\t\t);\n\t\t}\n\n\t\t// Dsiplay user info on sidebar \n\t\tconst showUserInfo = () => {\n\t\t\tclusterize.clear();\n\t\t\tclusterize.update([\n\t\t\t\t`\n\t\t\t\t\t<div class=\"shiftmap-clusterize-user-row shiftmap-clusterize-user-row-single\">\n\t\t\t\t\t\t<div class=\"shiftmap-clusterize-user-cell\">\n\t\t\t\t\t\t\t<div class=\"shiftmap-clusterize-avatar\">\n\t\t\t\t\t\t\t\t<img src=\"${user.url}\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"shiftmap-clusterize-content\">\n\t\t\t\t\t\t\t\t User: ${user.userName}\n\t\t\t\t\t\t\t\t City: ${user.city}\n\t\t\t\t\t\t\t\t Country: ${user.country}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t]);\n\t\t\tclusterize.refresh();\n\t\t};\n\t\t\n\t\t// On marker clikc user info is displayed\n\t\tgoogle.maps.event.addDomListener(user, 'click', showUserInfo);\n\t\t});\n\n\tconsole.log(listArray.length);\n\tclusterize.update(listArray);\n\tclusterize.refresh();\n};\nexport default buildList;","const checkData = (dataset) => {\n\ttry {\n\t\tJSON.stringify(dataset);\n\t\treturn true;\n\t}\n\tcatch(err) {\n\t\tconsole.error('Data is not JSON format!');\n\t\treturn false;\n\t}\n};\nexport default checkData;","// Generate random numbers between a min and a max values\nconst getRandom = (min, max) => {\n\treturn Math.random() * (max - min) + min;\n};\n\nexport default getRandom;","// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3_3.js\n// ==/ClosureCompiler==\n\n/**\n * @name MarkerClusterer for Google Maps v3\n * @version version 1.0.1\n * @author Luke Mahe\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * <br/>\n * This is a v3 implementation of the\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\n * >v2 MarkerClusterer</a>.\n */\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'imagePath': (string) The base URL where the images representing\n *                  clusters will be found. The full URL will be:\n *                  {imagePath}[1-5].{imageExtension}\n *                  Default: '../images/m'.\n *     'imageExtension': (string) The suffix for images URL representing\n *                       clusters will be found. See _imagePath_ for details.\n *                       Default: 'png'.\n *     'averageCenter': (boolean) Whether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'styles': (object) An object that has style properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n  // MarkerClusterer implements google.maps.OverlayView interface. We use the\n  // extend function to extend MarkerClusterer with google.maps.OverlayView\n  // because it might not always be available when the code is defined so we\n  // look for it at the last possible moment. If it doesn't exist now then\n  // there is no point going ahead :)\n  this.extend(MarkerClusterer, google.maps.OverlayView);\n  this.map_ = map;\n\n  /**\n   * @type {Array.<google.maps.Marker>}\n   * @private\n   */\n  this.markers_ = [];\n\n  /**\n   *  @type {Array.<Cluster>}\n   */\n  this.clusters_ = [];\n\n  this.sizes = [53, 56, 66, 78, 90];\n\n  /**\n   * @private\n   */\n  this.styles_ = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  var options = opt_options || {};\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.gridSize_ = options['gridSize'] || 60;\n\n  /**\n   * @private\n   */\n  this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n\n  /**\n   * @type {?number}\n   * @private\n   */\n  this.maxZoom_ = options['maxZoom'] || null;\n\n  this.styles_ = options['styles'] || [];\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imagePath_ = options['imagePath'] ||\n      this.MARKER_CLUSTER_IMAGE_PATH_;\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.imageExtension_ = options['imageExtension'] ||\n      this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.zoomOnClick_ = true;\n\n  if (options['zoomOnClick'] != undefined) {\n    this.zoomOnClick_ = options['zoomOnClick'];\n  }\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.averageCenter_ = false;\n\n  if (options['averageCenter'] != undefined) {\n    this.averageCenter_ = options['averageCenter'];\n  }\n\n  this.setupStyles_();\n\n  this.setMap(map);\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.prevZoom_ = this.map_.getZoom();\n\n  // Add the map event listeners\n  var that = this;\n  google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n    // Determines map type and prevent illegal zoom levels\n    var zoom = that.map_.getZoom();\n    var minZoom = that.map_.minZoom || 0;\n    var maxZoom = Math.min(that.map_.maxZoom || 100,\n                         that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom);\n    zoom = Math.min(Math.max(zoom,minZoom),maxZoom);\n\n    if (that.prevZoom_ != zoom) {\n      that.prevZoom_ = zoom;\n      that.resetViewport();\n    }\n  });\n\n  google.maps.event.addListener(this.map_, 'idle', function() {\n    that.redraw();\n  });\n\n  // Finally, add the markers\n  if (opt_markers && (opt_markers.length || Object.keys(opt_markers).length)) {\n    this.addMarkers(opt_markers, false);\n  }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ = '../images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n  return (function(object) {\n    for (var property in object.prototype) {\n      this.prototype[property] = object.prototype[property];\n    }\n    return this;\n  }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n  this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n  if (this.styles_.length) {\n    return;\n  }\n\n  for (var i = 0, size; size = this.sizes[i]; i++) {\n    this.styles_.push({\n      url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\n      height: size,\n      width: size\n    });\n  }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n  var markers = this.getMarkers();\n  var bounds = new google.maps.LatLngBounds();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n\n  this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n  this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n  return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n  return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n  return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n  return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n  this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n  return this.maxZoom_;\n};\n\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n  var index = 0;\n  var count = markers.length;\n  var dv = count;\n  while (dv !== 0) {\n    dv = parseInt(dv / 10, 10);\n    index++;\n  }\n\n  index = Math.min(index, numStyles);\n  return {\n    text: count,\n    index: index\n  };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n  this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n  return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n  if (markers.length) {\n    for (var i = 0, marker; marker = markers[i]; i++) {\n      this.pushMarkerTo_(marker);\n    }\n  } else if (Object.keys(markers).length) {\n    for (var marker in markers) {\n      this.pushMarkerTo_(markers[marker]);\n    }\n  }\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n  marker.isAdded = false;\n  if (marker['draggable']) {\n    // If the marker is draggable add a listener so we update the clusters on\n    // the drag end.\n    var that = this;\n    google.maps.event.addListener(marker, 'dragend', function() {\n      marker.isAdded = false;\n      that.repaint();\n    });\n  }\n  this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n  this.pushMarkerTo_(marker);\n  if (!opt_nodraw) {\n    this.redraw();\n  }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n  var index = -1;\n  if (this.markers_.indexOf) {\n    index = this.markers_.indexOf(marker);\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  if (index == -1) {\n    // Marker is not in our list of markers.\n    return false;\n  }\n\n  marker.setMap(null);\n\n  this.markers_.splice(index, 1);\n\n  return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n  var removed = this.removeMarker_(marker);\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  } else {\n   return false;\n  }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n  // create a local copy of markers if required\n  // (removeMarker_ modifies the getMarkers() array in place)\n  var markersCopy = markers === this.getMarkers() ? markers.slice() : markers;\n  var removed = false;\n\n  for (var i = 0, marker; marker = markersCopy[i]; i++) {\n    var r = this.removeMarker_(marker);\n    removed = removed || r;\n  }\n\n  if (!opt_nodraw && removed) {\n    this.resetViewport();\n    this.redraw();\n    return true;\n  }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n  if (!this.ready_) {\n    this.ready_ = ready;\n    this.createClusters_();\n  }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n  return this.clusters_.length;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n  this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n  return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n  this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n  return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n  this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n  var projection = this.getProjection();\n\n  // Turn the bounds into latlng.\n  var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n      bounds.getNorthEast().lng());\n  var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n      bounds.getSouthWest().lng());\n\n  // Convert the points to pixels and the extend out by the grid size.\n  var trPix = projection.fromLatLngToDivPixel(tr);\n  trPix.x += this.gridSize_;\n  trPix.y -= this.gridSize_;\n\n  var blPix = projection.fromLatLngToDivPixel(bl);\n  blPix.x -= this.gridSize_;\n  blPix.y += this.gridSize_;\n\n  // Convert the pixel points back to LatLng\n  var ne = projection.fromDivPixelToLatLng(trPix);\n  var sw = projection.fromDivPixelToLatLng(blPix);\n\n  // Extend the bounds to contain the new bounds.\n  bounds.extend(ne);\n  bounds.extend(sw);\n\n  return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n  return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n  this.resetViewport(true);\n\n  // Set the markers a empty array.\n  this.markers_ = [];\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n  // Remove all the clusters\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    cluster.remove();\n  }\n\n  // Reset the markers to not be added and to be invisible.\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    marker.isAdded = false;\n    if (opt_hide) {\n      marker.setMap(null);\n    }\n  }\n\n  this.clusters_ = [];\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n  var oldClusters = this.clusters_.slice();\n  this.clusters_.length = 0;\n  this.resetViewport();\n  this.redraw();\n\n  // Remove the old clusters.\n  // Do it in a timeout so the other clusters have been drawn first.\n  window.setTimeout(function() {\n    for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n      cluster.remove();\n    }\n  }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n  this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n*/\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n  if (!p1 || !p2) {\n    return 0;\n  }\n\n  var R = 6371; // Radius of the Earth in km\n  var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n  var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  var d = R * c;\n  return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n  var distance = 40000; // Some large number\n  var clusterToAddTo = null;\n  var pos = marker.getPosition();\n  for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n    var center = cluster.getCenter();\n    if (center) {\n      var d = this.distanceBetweenPoints_(center, marker.getPosition());\n      if (d < distance) {\n        distance = d;\n        clusterToAddTo = cluster;\n      }\n    }\n  }\n\n  if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n    clusterToAddTo.addMarker(marker);\n  } else {\n    var cluster = new Cluster(this);\n    cluster.addMarker(marker);\n    this.clusters_.push(cluster);\n  }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n  if (!this.ready_) {\n    return;\n  }\n\n  // Get our current map view bounds.\n  // Create a new bounds object so we don't affect the map.\n  var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n      this.map_.getBounds().getNorthEast());\n  var bounds = this.getExtendedBounds(mapBounds);\n\n  for (var i = 0, marker; marker = this.markers_[i]; i++) {\n    if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n      this.addToClosestCluster_(marker);\n    }\n  }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n  this.markerClusterer_ = markerClusterer;\n  this.map_ = markerClusterer.getMap();\n  this.gridSize_ = markerClusterer.getGridSize();\n  this.minClusterSize_ = markerClusterer.getMinClusterSize();\n  this.averageCenter_ = markerClusterer.isAverageCenter();\n  this.center_ = null;\n  this.markers_ = [];\n  this.bounds_ = null;\n  this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n      markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n  if (this.markers_.indexOf) {\n    return this.markers_.indexOf(marker) != -1;\n  } else {\n    for (var i = 0, m; m = this.markers_[i]; i++) {\n      if (m == marker) {\n        return true;\n      }\n    }\n  }\n  return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n  if (this.isMarkerAlreadyAdded(marker)) {\n    return false;\n  }\n\n  if (!this.center_) {\n    this.center_ = marker.getPosition();\n    this.calculateBounds_();\n  } else {\n    if (this.averageCenter_) {\n      var l = this.markers_.length + 1;\n      var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\n      var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\n      this.center_ = new google.maps.LatLng(lat, lng);\n      this.calculateBounds_();\n    }\n  }\n\n  marker.isAdded = true;\n  this.markers_.push(marker);\n\n  var len = this.markers_.length;\n  if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n    // Min cluster size not reached so show the marker.\n    marker.setMap(this.map_);\n  }\n\n  if (len == this.minClusterSize_) {\n    // Hide the markers that were showing.\n    for (var i = 0; i < len; i++) {\n      this.markers_[i].setMap(null);\n    }\n  }\n\n  if (len >= this.minClusterSize_) {\n    marker.setMap(null);\n  }\n\n  this.updateIcon();\n  return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n  return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  var markers = this.getMarkers();\n  for (var i = 0, marker; marker = markers[i]; i++) {\n    bounds.extend(marker.getPosition());\n  }\n  return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n  this.clusterIcon_.remove();\n  this.markers_.length = 0;\n  delete this.markers_;\n};\n\n\n/**\n * Returns the number of markers in the cluster.\n *\n * @return {number} The number of markers in the cluster.\n */\nCluster.prototype.getSize = function() {\n  return this.markers_.length;\n};\n\n\n/**\n * Returns a list of the markers in the cluster.\n *\n * @return {Array.<google.maps.Marker>} The markers in the cluster.\n */\nCluster.prototype.getMarkers = function() {\n  return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n  return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n  var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n  this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n  return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n  return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n  var zoom = this.map_.getZoom();\n  var mz = this.markerClusterer_.getMaxZoom();\n\n  if (mz && zoom > mz) {\n    // The zoom is greater than our max zoom so show all the markers in cluster.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n      marker.setMap(this.map_);\n    }\n    return;\n  }\n\n  if (this.markers_.length < this.minClusterSize_) {\n    // Min cluster size not yet reached.\n    this.clusterIcon_.hide();\n    return;\n  }\n\n  var numStyles = this.markerClusterer_.getStyles().length;\n  var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n  this.clusterIcon_.setCenter(this.center_);\n  this.clusterIcon_.setSums(sums);\n  this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n  cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n  this.styles_ = styles;\n  this.padding_ = opt_padding || 0;\n  this.cluster_ = cluster;\n  this.center_ = null;\n  this.map_ = cluster.getMap();\n  this.div_ = null;\n  this.sums_ = null;\n  this.visible_ = false;\n\n  this.setMap(this.map_);\n}\n\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n */\nClusterIcon.prototype.triggerClusterClick = function() {\n  var markerClusterer = this.cluster_.getMarkerClusterer();\n\n  // Trigger the clusterclick event.\n  google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);\n\n  if (markerClusterer.isZoomOnClick()) {\n    // Zoom into the cluster.\n    this.map_.fitBounds(this.cluster_.getBounds());\n  }\n};\n\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function() {\n  this.div_ = document.createElement('DIV');\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.innerHTML = this.sums_.text;\n  }\n\n  var panes = this.getPanes();\n  panes.overlayMouseTarget.appendChild(this.div_);\n\n  var that = this;\n  google.maps.event.addDomListener(this.div_, 'click', function() {\n    that.triggerClusterClick();\n  });\n};\n\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n  var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n  pos.x -= parseInt(this.width_ / 2, 10);\n  pos.y -= parseInt(this.height_ / 2, 10);\n  return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function() {\n  if (this.visible_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.top = pos.y + 'px';\n    this.div_.style.left = pos.x + 'px';\n  }\n};\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n  if (this.div_) {\n    this.div_.style.display = 'none';\n  }\n  this.visible_ = false;\n};\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n  if (this.div_) {\n    var pos = this.getPosFromLatLng_(this.center_);\n    this.div_.style.cssText = this.createCss(pos);\n    this.div_.style.display = '';\n  }\n  this.visible_ = true;\n};\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n  this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n  if (this.div_ && this.div_.parentNode) {\n    this.hide();\n    this.div_.parentNode.removeChild(this.div_);\n    this.div_ = null;\n  }\n};\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n  this.sums_ = sums;\n  this.text_ = sums.text;\n  this.index_ = sums.index;\n  if (this.div_) {\n    this.div_.innerHTML = sums.text;\n  }\n\n  this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n  var index = Math.max(0, this.sums_.index - 1);\n  index = Math.min(this.styles_.length - 1, index);\n  var style = this.styles_[index];\n  this.url_ = style['url'];\n  this.height_ = style['height'];\n  this.width_ = style['width'];\n  this.textColor_ = style['textColor'];\n  this.anchor_ = style['anchor'];\n  this.textSize_ = style['textSize'];\n  this.backgroundPosition_ = style['backgroundPosition'];\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n  this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n  var style = [];\n  style.push('background-image:url(' + this.url_ + ');');\n  var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n  style.push('background-position:' + backgroundPosition + ';');\n\n  if (typeof this.anchor_ === 'object') {\n    if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n        this.anchor_[0] < this.height_) {\n      style.push('height:' + (this.height_ - this.anchor_[0]) +\n          'px; padding-top:' + this.anchor_[0] + 'px;');\n    } else {\n      style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n          'px;');\n    }\n    if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n        this.anchor_[1] < this.width_) {\n      style.push('width:' + (this.width_ - this.anchor_[1]) +\n          'px; padding-left:' + this.anchor_[1] + 'px;');\n    } else {\n      style.push('width:' + this.width_ + 'px; text-align:center;');\n    }\n  } else {\n    style.push('height:' + this.height_ + 'px; line-height:' +\n        this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n  }\n\n  var txtColor = this.textColor_ ? this.textColor_ : 'black';\n  var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n  style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n      pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n      txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n  return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;\n\nObject.keys = Object.keys || function(o) {  \n    var result = [];  \n    for(var name in o) {  \n        if (o.hasOwnProperty(name))  \n          result.push(name);  \n    }  \n    return result;  \n};\n\nexport default MarkerClusterer;","(function (root) {\n\n  // Store setTimeout reference so promise-polyfill will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var setTimeoutFunc = setTimeout;\n\n  function noop() {}\n  \n  // Polyfill for Function.prototype.bind\n  function bind(fn, thisArg) {\n    return function () {\n      fn.apply(thisArg, arguments);\n    };\n  }\n\n  function Promise(fn) {\n    if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n    if (typeof fn !== 'function') throw new TypeError('not a function');\n    this._state = 0;\n    this._handled = false;\n    this._value = undefined;\n    this._deferreds = [];\n\n    doResolve(fn, this);\n  }\n\n  function handle(self, deferred) {\n    while (self._state === 3) {\n      self = self._value;\n    }\n    if (self._state === 0) {\n      self._deferreds.push(deferred);\n      return;\n    }\n    self._handled = true;\n    Promise._immediateFn(function () {\n      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n      if (cb === null) {\n        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n        return;\n      }\n      var ret;\n      try {\n        ret = cb(self._value);\n      } catch (e) {\n        reject(deferred.promise, e);\n        return;\n      }\n      resolve(deferred.promise, ret);\n    });\n  }\n\n  function resolve(self, newValue) {\n    try {\n      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n        var then = newValue.then;\n        if (newValue instanceof Promise) {\n          self._state = 3;\n          self._value = newValue;\n          finale(self);\n          return;\n        } else if (typeof then === 'function') {\n          doResolve(bind(then, newValue), self);\n          return;\n        }\n      }\n      self._state = 1;\n      self._value = newValue;\n      finale(self);\n    } catch (e) {\n      reject(self, e);\n    }\n  }\n\n  function reject(self, newValue) {\n    self._state = 2;\n    self._value = newValue;\n    finale(self);\n  }\n\n  function finale(self) {\n    if (self._state === 2 && self._deferreds.length === 0) {\n      Promise._immediateFn(function() {\n        if (!self._handled) {\n          Promise._unhandledRejectionFn(self._value);\n        }\n      });\n    }\n\n    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n      handle(self, self._deferreds[i]);\n    }\n    self._deferreds = null;\n  }\n\n  function Handler(onFulfilled, onRejected, promise) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.promise = promise;\n  }\n\n  /**\n   * Take a potentially misbehaving resolver function and make sure\n   * onFulfilled and onRejected are only called once.\n   *\n   * Makes no guarantees about asynchrony.\n   */\n  function doResolve(fn, self) {\n    var done = false;\n    try {\n      fn(function (value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      }, function (reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      });\n    } catch (ex) {\n      if (done) return;\n      done = true;\n      reject(self, ex);\n    }\n  }\n\n  Promise.prototype['catch'] = function (onRejected) {\n    return this.then(null, onRejected);\n  };\n\n  Promise.prototype.then = function (onFulfilled, onRejected) {\n    var prom = new (this.constructor)(noop);\n\n    handle(this, new Handler(onFulfilled, onRejected, prom));\n    return prom;\n  };\n\n  Promise.all = function (arr) {\n    var args = Array.prototype.slice.call(arr);\n\n    return new Promise(function (resolve, reject) {\n      if (args.length === 0) return resolve([]);\n      var remaining = args.length;\n\n      function res(i, val) {\n        try {\n          if (val && (typeof val === 'object' || typeof val === 'function')) {\n            var then = val.then;\n            if (typeof then === 'function') {\n              then.call(val, function (val) {\n                res(i, val);\n              }, reject);\n              return;\n            }\n          }\n          args[i] = val;\n          if (--remaining === 0) {\n            resolve(args);\n          }\n        } catch (ex) {\n          reject(ex);\n        }\n      }\n\n      for (var i = 0; i < args.length; i++) {\n        res(i, args[i]);\n      }\n    });\n  };\n\n  Promise.resolve = function (value) {\n    if (value && typeof value === 'object' && value.constructor === Promise) {\n      return value;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(value);\n    });\n  };\n\n  Promise.reject = function (value) {\n    return new Promise(function (resolve, reject) {\n      reject(value);\n    });\n  };\n\n  Promise.race = function (values) {\n    return new Promise(function (resolve, reject) {\n      for (var i = 0, len = values.length; i < len; i++) {\n        values[i].then(resolve, reject);\n      }\n    });\n  };\n\n  // Use polyfill for setImmediate for performance gains\n  Promise._immediateFn = (typeof setImmediate === 'function' && function (fn) { setImmediate(fn); }) ||\n    function (fn) {\n      setTimeoutFunc(fn, 0);\n    };\n\n  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n    if (typeof console !== 'undefined' && console) {\n      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Set the immediate function to execute callbacks\n   * @param fn {function} Function to execute\n   * @deprecated\n   */\n  Promise._setImmediateFn = function _setImmediateFn(fn) {\n    Promise._immediateFn = fn;\n  };\n\n  /**\n   * Change the function to execute on unhandled rejection\n   * @param {function} fn Function to execute on unhandled rejection\n   * @deprecated\n   */\n  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n    Promise._unhandledRejectionFn = fn;\n  };\n  \n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = Promise;\n  } else if (!root.Promise) {\n    root.Promise = Promise;\n  }\n\n})(window);\n\nexport default Promise;","import Clusterize from 'clusterize.js';\nimport { icon, clusterOptions } from '../map/options';\nimport buildList from '../buildList/buildList';\nimport checkData from './checkData';\nimport getRandom from './getRandom';\nimport MarkerClusterer from '../map/markerclusterer.js';\n\nimport '../../polyfills/promise-polyfill';\n\nconst $ = jQuery;\n\nconst fetchData = (map, data, markers, url, domElement) => {\n\tlet localMap = map;\n\tlet listArray = [];\n\tlet avatarURL = url;\n\n\tconst scrollElement = $(domElement).find(\".shiftmap-map-clusterise-wrapper\").get(0);\n\tconst contentElement = $(domElement).find(\".shiftmap-clusterize-content-wrapper\").get(0);\n\n\t// Create list\n\tlet clusterize = new Clusterize({\n\t\trows: null,\n\t\trows_in_block: 2,\n\t\tscrollElem: scrollElement,\n\t\tcontentElem: contentElement,\n\t});\n\n\t// Add markers\n\tif (checkData(data)) {\n\t\tdata.map((markerPosition) => {\n\t\t\tif (!markerPosition.latitude || !markerPosition.longitude) {\n\t\t\t\tconsole.log('meh');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet location = new google.maps.LatLng({\n\t\t\t\t\tlat: markerPosition.latitude + getRandom(0, 0.5), \n\t\t\t\t\tlng: markerPosition.longitude + getRandom(0, 0.5)\n\t\t\t\t});\n\t\t\t\tconst marker = new google.maps.Marker({\n\t\t\t\t\tposition: location,\n\t\t\t\t\tmap: localMap,\n\t\t\t\t\ticon: icon,\n\t\t\t\t\toptimized: false,\n\t\t\t\t\tuserID: markerPosition.user_id,\n\t\t\t\t\tuserName: markerPosition.full_name,\n\t\t\t\t\tcountry: markerPosition.country,\n\t\t\t\t\tcity: markerPosition.city,\n\t\t\t\t\turl: avatarURL[0] + 'luke-siedle' + avatarURL[1]\n\t\t\t\t});\n\t\t\t\tmarkers.push(marker);\n\t\t\t}\n\t\t});\n\n\t\t// Create MarkerClusterer\n\t\tconst markerCluster = new MarkerClusterer(localMap, markers, clusterOptions);\n\n\t\t// Updates list when viewport changes\n\t\tgoogle.maps.event.addListener(localMap, 'bounds_changed', function() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tbuildList(clusterize, listArray, markers, localMap);\n\t\t\t}, 200 );\n\t\t});\n\t\t\tgoogle.maps.event.addListener(map, \"idle\", function() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tgoogle.maps.event.trigger(map, 'resize');\n\t\t\t}, 200 );\n\t\t});\n\t}\n};\n\nexport default fetchData;\n","import { mapOptions } from './options';\nimport template from '../../template.html';\n\nconst createMap = (domElement) => {\n\tconst $ = window.jQuery;\n\tconst $wrapper = $(domElement).html(template);\n\tconst $map = $wrapper.find('.shiftmap-map');\n\treturn new google.maps.Map($map.get(0), mapOptions);\n}\n\nexport default createMap;\n","const defineCenter = (lat, lng) =>  new google.maps.LatLng(parseFloat(lat).toFixed(6), parseFloat(lng).toFixed(6));\n\nexport default defineCenter;\n","const pngsList = {\n\t'person-001' : [40,63],\n\t'person-002' : [38,63],\n\t'person-003' : [45,43],\n\t'person-004' : [40,62],\n\t'person-005' : [39,63],\n\t'person-006' : [41,63],\n\t'person-007' : [38,63],\n\t'person-008' : [40,63],\n\t'person-009' : [37,62],\n\t'person-010' : [37,62],\n\t'person-011' : [38,63],\n\t'person-012' : [37,61],\n\t'person-013' : [36,63],\n\t'person-014' : [37,63],\n\t'person-015' : [39,62],\n\t'person-016' : [38,62],\n\t'person-017' : [37,61],\n\t'person-018' : [37,63],\n\t'person-019' : [36,61],\n\t'person-020' : [39,61],\n\t'person-021' : [37,61],\n\t'person-022' : [37,60],\n\t'person-023' : [41,68],\n\t'person-024' : [40,61],\n\t'person-025' : [36,61],\n\t'person-026' : [38,61],\n\t'person-027' : [38,60],\n\t'person-028' : [36,60],\n\t'person-029' : [37,65],\n\t'person-030' : [35,61],\n\t'person-031' : [37,63],\n\t'person-032' : [44,53],\n\t'person-033' : [39,63],\n\t'person-034' : [39,63],\n\t'person-035' : [68,65],\n\t'person-036' : [37,60],\n\t'person-037' : [37,60],\n\t'person-038' : [37,60],\n\t'person-039' : [36,61],\n\t'person-040' : [57,62],\n\t'person-041' : [65,63],\n\t'person-042' : [40,63],\n\t'person-043' : [40,63],\n\t'person-044' : [49,66],\n\t'person-045' : [37,65],\n\t'dinosaur' \t : [105,85],\n\t'giraffe'\t : [64,77]\n}\n\nexport default pngsList;\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","import Symbol from '../map/svgMarkers';\nimport pngsList from './iconsList';\nimport '../../polyfills/promise-polyfill';\nimport 'whatwg-fetch';\n\n\nconst placeCharacters = (map, assetsURL) => {\n\tconst capitalsMarkers = [];\n\tconst icons = [];\n\tconst localMap = map;\n\tconst pngs = Object.keys(pngsList);\n\tlet j = 0;\n\t\n\t/*\n\t we would have a parameter passed for the icons list instead of importing locally e.g.\n\t placeCharacters = (map, assetsURL, iconsList) => {}\n\t const templateRoot = '<?php echo get_template_directory_uri() ?>'\n\t const pngs = Object.keys(iconsList);\n\t then below on the character object we could handle as commented\n\t*/\n\n\t\n\tfetch(\"./datasets/capitals.json\")\n\t\t.then((response) => response.json())\n\t\t.then((capitals) => {\n\t\t\tcapitals.map((capital) => {\n\t\t\t\tif (j === pngsList.length) { j = 0;\t}\n\n\t\t\t\tconst img = pngs[j]||pngs[0];\n\t\t\t\tconst imgSize = pngsList[img];\n\t\t\t\t\n\t\t\t\t// Character object \n\t\t\t\tlet character = {\n\t\t\t\t\tposition: new google.maps.LatLng(capital.longitude, capital.latitude),\n\t\t\t\t\ticon: {\n\t\t\t\t\t\t// url: `${templateRoot}${img}.png`,\n\t\t\t\t\t\turl: `${assetsURL}${img}.png`, //`../img/${img}.png`,\n\t\t\t\t\t\tsize: new google.maps.Size(imgSize[0], imgSize[1]),\n\t\t\t\t\t\torigin: new google.maps.Point(0, 0),\n\t\t\t\t\t\tanchor: new google.maps.Point(17, 34),\n\t\t\t\t\t\tscaledSize: new google.maps.Size(imgSize[0], imgSize[1]),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t\t// Add a marker for each character\n\t\t\t\tcapitalsMarkers.push(\tnew google.maps.Marker({\n\t\t\t\t\t\tposition: character.position,\n\t\t\t\t\t\tmap: localMap,\n\t\t\t\t\t\ticon: character.icon,\n\t\t\t\t\t\tvisible: false\n\t\t\t\t\t})\n\t\t\t\t);\t\t\t\n\t\t\t\ticons.push(character);\n\t\t\t\tj++;\n\t\t\t})\n\t\t}).catch((err) => {\n\t\t\tconsole.log(err);\n\t});\n\n\t//\tChange markers on zoom\n\tgoogle.maps.event.addListener(localMap, 'zoom_changed', function() {\n\t\tlet zoom = localMap.getZoom();\n\t\t\n\t\tcapitalsMarkers.map((marker) => {\n\t\t\tmarker.setVisible(zoom > 5);\n\t\t});\n\t});\n}\n\nexport default placeCharacters;","/*eslint-disable */\nimport '../../../styles/main.v2.scss';\n\nimport createSearchBox from '../searchBox/createSearchBox';\nimport searchBox from '../searchBox/searchBox';\nimport fetchData from '../fetchData/fetchData';\nimport createMap from './createMap';\nimport defineCenter from './defineCenter';\nimport placeCharacters from '../characters/placeCharacters';\nimport {\n\ticon,\n\tsetIcon,\n\taddCenterToOptions\n} from './options';\n\n// Places markers\nlet placeMarkers = [];\n\n// Places holder\nlet places;\n\n// Markers holder\nlet markers = [];\n\n// Map center\nconst london = defineCenter(51.521723, -0.134581);\naddCenterToOptions(london);\n\n// Map\nlet map;\n\n// Search Box\nlet sBox;\n\nconst $ = window.jQuery;\n\nconst initialize = (domElement, data, avatarURL, assetsURL) => {\n\tdomElement = '' ? undefined : domElement;\n\tdata       = '' ? undefined : data;\n\tavatarURL  = '' ? undefined : avatarURL;\n\tassetsURL  = '' ? undefined : assetsURL;\n\n\n\tmap = createMap(domElement);\n\n\tsBox = createSearchBox(map, domElement);\n\t\n\t// fetch dataset\n\tfetchData(map, data, markers, avatarURL, domElement);\n\n\t// Create Search Box\n\tsearchBox(map, places, sBox, placeMarkers, icon, setIcon);\n\n\tbindEvents( domElement );\n\t\n\t// Add characters\n\tsetTimeout(() => {\n\t\tplaceCharacters(map, assetsURL);\n\t}, 100 );\n};\n\nconst changeMapLocation = (lat, lng) => {\n\tlet location = defineCenter(lat, lng);\n\t\t\n\t\tmap.panTo(location);\n\t\tconsole.log('Map moved to: ', location);\n};\n\nconst onMapReady = (callback) => {\n\tif (typeof callback === 'function') {\n\t\tgoogle.maps.event.addListenerOnce(map, 'idle', callback);\n\t}\n\telse {\n\t\tconsole.error('provide a callback function');\n\t}\n};\n\nconst onMapChangeLocation = (callback) => {\n\tif (typeof callback === 'function') {\n\t\tgoogle.maps.event.addListener(map, 'idle', callback);\n\t}\n\telse {\n\t\tconsole.error('provide a callback function');\n\t}\n}\n\nconst defineURL = (url, imgFormat) => {\n\treturn [url.toString(), imgFormat.toString()];\n}\n\nconst bindEvents = ( domElement ) => {\n\tconst $panel = $(domElement).find('.shiftmap-map-clusterise-user-panel');\n\t$panel.find('.shiftmap-map-toggle-panel').click(() => {\n\t\t$panel.toggleClass('closed');\n\t});\n}\n\nconst setWidthHeight = (width, height) => {\n\t$('.shiftmap-wrapper').width(width).height(height);\n\t$('.shiftmap-map').width(width).height(height);\n\tconst map = $('.shiftmap-map').get(0);\n\tgoogle.maps.event.trigger(map, 'resize');\t\n\tgoogle.maps.event.addListenerOnce(map, 'idle', function() {\n\t\tgoogle.maps.event.trigger(map, 'resize'); \n\t});\n};\n\nexport {\n\tinitialize,\n\tsetWidthHeight,\n\tonMapReady,\n\tonMapChangeLocation,\n\tdefineURL,\n\tchangeMapLocation\n};"],"names":["$","window","jQuery","createSearchBox","map","mapWrapper","localMap","$input","find","input","get","searchBox","google","maps","places","SearchBox","sBox","placeMarkers","icon","setIcon","addListener","setBounds","getBounds","getPlaces","length","forEach","marker","setMap","bounds","LatLngBounds","place","geometry","log","newIcon","size","origin","anchor","scaledSize","placeIcon","push","Marker","name","location","viewport","union","extend","fitBounds","definition","module","ie","v","el","document","createElement","all","innerHTML","documentMode","is_mac","navigator","platform","toLowerCase","indexOf","Clusterize","data","self","defaults","options","i","option","elems","elem","getElementById","Error","content_elem","hasAttribute","setAttribute","rows","isArray","fetchMarkup","cache","scroll_top","scroll_elem","scrollTop","insertToDOM","last_cluster","scroll_debounce","pointer_events_set","scrollEv","style","pointerEvents","setTimeout","getClusterNum","callbacks","scrollingProgress","getScrollProgress","resize_debounce","resizeEv","refresh","destroy","clean","html","generateEmptyRow","join","force","getRowsHeight","update","new_rows","item_height","clear","getRowsAmount","add","where","_new_rows","concat","append","prepend","prototype","rows_nodes","getChildNodes","shift","outerHTML","opts","content_tag","tagName","tag","match","children","prev_item_height","cluster_height","nodes","node","Math","floor","offsetHeight","getStyle","parseInt","marginTop","marginBottom","max","block_height","rows_in_block","rows_in_cluster","blocks_in_cluster","show_no_data_row","empty_row","no_data_content","createTextNode","no_data_text","td","className","no_data_class","colSpan","appendChild","cluster_num","rows_len","items_start","items_end","top_offset","bottom_offset","this_cluster_rows","rows_above","class_name","height","clusterize_prefix","exploreEnvironment","generate","this_cluster_content_changed","checkChanges","top_offset_changed","only_bottom_offset_changed","layout","keep_parity","renderExtraTag","clusterWillChange","clusterChanged","lastChild","div","last","removeChild","firstChild","child_nodes","ii","type","value","changed","on","evt","element","fnc","addEventListener","attachEvent","off","removeEventListener","detachEvent","arr","Object","toString","call","prop","getComputedStyle","currentStyle","Symbol","id","width","fill","marker_svg","btoa","p","land","water","mapStyles","mapOptions","MapTypeId","ROADMAP","clusterStyles","clusterOptions","addCenterToOptions","center","Size","Point","buildList","clusterize","listArray","markers","user","contains","getPosition","userID","url","userName","showUserInfo","city","country","event","addDomListener","checkData","dataset","stringify","err","error","getRandom","min","random","MarkerClusterer","opt_markers","opt_options","OverlayView","map_","markers_","clusters_","sizes","styles_","ready_","gridSize_","minClusterSize_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","undefined","averageCenter_","setupStyles_","prevZoom_","getZoom","that","zoom","minZoom","maxZoom","mapTypes","getMapTypeId","resetViewport","redraw","keys","addMarkers","obj1","obj2","object","property","apply","onAdd","setReady_","draw","fitMapToMarkers","getMarkers","setStyles","styles","getStyles","isZoomOnClick","isAverageCenter","getTotalMarkers","setMaxZoom","getMaxZoom","calculator_","numStyles","index","count","dv","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","m","splice","removeMarker","removed","removeMarkers","markersCopy","slice","r","ready","createClusters_","getTotalClusters","getMap","getGridSize","setGridSize","getMinClusterSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","clearMarkers","opt_hide","cluster","remove","oldClusters","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","d","addToClosestCluster_","distance","clusterToAddTo","pos","getCenter","isMarkerInClusterBounds","Cluster","mapBounds","markerClusterer","markerClusterer_","center_","bounds_","clusterIcon_","ClusterIcon","isMarkerAlreadyAdded","calculateBounds_","l","len","updateIcon","getMarkerClusterer","getSize","mz","hide","sums","setCenter","setSums","show","opt_padding","padding_","cluster_","div_","sums_","visible_","triggerClusterClick","trigger","getPosFromLatLng_","cssText","createCss","text","panes","getPanes","overlayMouseTarget","latlng","width_","height_","top","left","display","onRemove","parentNode","text_","index_","useStyle","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","_typeof","txtColor","txtSize","o","result","hasOwnProperty","root","setTimeoutFunc","noop","bind","fn","thisArg","arguments","Promise","TypeError","_state","_handled","_value","_deferreds","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","resolve","reject","promise","ret","e","newValue","then","finale","_unhandledRejectionFn","Handler","doResolve","done","reason","ex","prom","constructor","args","Array","remaining","res","val","race","values","setImmediate","console","warn","_setImmediateFn","_setUnhandledRejectionFn","exports","fetchData","domElement","avatarURL","scrollElement","contentElement","markerPosition","latitude","longitude","user_id","full_name","markerCluster","createMap","$wrapper","template","$map","Map","defineCenter","parseFloat","toFixed","pngsList","fetch","support","Blob","arrayBuffer","viewClasses","isDataView","obj","DataView","isPrototypeOf","isArrayBufferView","ArrayBuffer","isView","normalizeName","String","test","normalizeValue","iteratorFor","items","iterator","iterable","Headers","headers","header","getOwnPropertyNames","oldValue","has","set","callback","entries","consumed","body","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","bufferClone","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","_bodyArrayBuffer","rejected","decode","json","JSON","parse","methods","normalizeMethod","method","upcased","toUpperCase","Request","credentials","mode","referrer","clone","form","trim","split","bytes","replace","decodeURIComponent","parseHeaders","rawHeaders","line","parts","key","Response","bodyInit","status","ok","statusText","response","redirectStatuses","redirect","RangeError","init","request","xhr","XMLHttpRequest","getAllResponseHeaders","responseURL","responseText","ontimeout","open","withCredentials","responseType","setRequestHeader","send","polyfill","this","placeCharacters","assetsURL","capitalsMarkers","icons","pngs","j","capitals","capital","img","imgSize","character","position","catch","setVisible","london","initialize","changeMapLocation","panTo","onMapReady","addListenerOnce","onMapChangeLocation","defineURL","imgFormat","bindEvents","$panel","click","toggleClass","setWidthHeight"],"mappings":"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"}