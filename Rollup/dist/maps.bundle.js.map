{"version":3,"file":"maps.bundle.js","sources":["../src/components/svgMarker.js","../src/components/options.js","../src/components/createMap.js","../src/components/defineCenter.js","../src/components/searchBox.js","../src/components/createSearchBox.js","../node_modules/clusterize.js/clusterize.js","../src/components/fetchData.js","../src/components/maps.js","../src/index.js"],"sourcesContent":["// Cluster markers SVG\r\nconst Symbol = (id, width, height, fill) => {\r\n  const marker_svg = {\r\n    marker: {\r\n      p: 'M244.31,0C256.87,2.49,269.59,4.38,282,7.58c35.11,9.1,65.15,27.29,90.44,53.07C401.19,90,419.56,125,427,165.51q12.58,68.25-18.92,130.11Q319.47,469.54,230.64,643.36c-.73,1.42-1.59,2.78-2.79,4.87-1.41-2.43-2.5-4.14-3.42-5.93C165.11,526,104.62,410.27,46.93,293.17,8.94,216.08,18.43,141.32,71.6,74c34-43,80.17-66.6,134.87-72.86A44.62,44.62,0,0,0,211.37,0Z',\r\n      v: '0 0 430.62 648.23'\r\n    }\r\n  };\r\n  return ('data:image/svg+xml;base64,' + window.btoa('<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"' + height + '\" viewBox=\"0 0 430.62 648.23\" width=\"' + width + '\" ><g><path fill=\"' + fill + '\" d=\"' + marker_svg[id].p + '\" /></g></svg>'));\r\n};\r\n\r\nexport default Symbol;","import Symbol from './svgMarker';\r\n\r\n// Icon\r\nlet icon = {\r\n  url: Symbol('marker', 25, 25, '#f16667'),\r\n  size: new google.maps.Size(71, 71),\r\n  origin: new google.maps.Point(0, 0),\r\n  anchor: new google.maps.Point(17, 34),\r\n  scaledSize: new google.maps.Size(25, 25)\r\n};\r\n\r\n// Map options\r\nlet mapOptions = {\r\n  zoom: 4,\r\n  center: null,\r\n  mapTypeId: google.maps.MapTypeId.ROADMAP\r\n};\r\n\r\n// Cluster markers style\r\nconst clusterStyles = [\r\n  {\r\n    anchor: [13, 35],\r\n    textColor: 'white',\r\n    textSize: '16',\r\n    url: Symbol('marker', 75, 75, '#f16667'),\r\n    height: 75,\r\n    width: 75\r\n  },\r\n  {\r\n    anchor: [20, 42],\r\n    textColor: 'white',\r\n    textSize: '18',\r\n    url: Symbol('marker', 100, 100, '#f16667'),\r\n    height: 100,\r\n    width: 100\r\n  },\r\n  {\r\n    anchor: [20, 43.5],\r\n    textColor: 'white',\r\n    textSize: '24',\r\n    url: Symbol('marker', 125, 125, '#f16667'),\r\n    height: 125,\r\n    width: 125\r\n  }\r\n];\r\n\r\n// Cluster options\r\nconst clusterOptions = {\r\n  maxZoom: 15,\r\n  gridSize: 75,\r\n  styles: clusterStyles\r\n};\r\n\r\n// Set new icon\r\nconst setIcon = (newIcon) => {\r\n  icon = newIcon;\r\n  return icon\r\n};\r\n\r\nconst addCenterToOptions = (center) => {\r\n  mapOptions.center = center;\r\n};\r\n\r\nexport {\r\n  icon,\r\n  mapOptions,\r\n  clusterOptions,\r\n  setIcon,\r\n  addCenterToOptions\r\n}","import {mapOptions} from './options';\r\n\r\nconst createMap = () => new google.maps.Map(document.getElementById(\"map\"), mapOptions);\r\n\r\nexport default createMap;\r\n\r\n","const defineCenter = (lat, lng) => new google.maps.LatLng(parseFloat(lat).toFixed(6), parseFloat(lng).toFixed(6));\r\n\r\nexport default defineCenter;\r\n","const searchBox = (map, places, sBox, placeMarkers, icon, setIcon) => {\r\n\r\n  let sbMap = map;\r\n  // Bias searchbox results towards current map's viewport\r\n  sbMap.addListener('bounds_changed', function() {\r\n    sBox.setBounds(sbMap.getBounds());\r\n  });\r\n\r\n  // Listen for the event fired when the user selects a prediction and retrieve\r\n  // more details for that place.\r\n  sBox.addListener('places_changed', function() {\r\n    places = searchBox.getPlaces();\r\n    if (places.length == 0) {\r\n      return;\r\n    }\r\n\r\n    // Clear out the old markers.\r\n    placeMarkers.forEach(function(marker) {\r\n      marker.setMap(null);\r\n    });\r\n    placeMarkers = [];\r\n\r\n    // For each place, get the icon, name and location.\r\n    let bounds = new google.maps.LatLngBounds();\r\n    places.forEach(function(place) {\r\n      if (!place.geometry) {\r\n        console.log(\"Returned place contains no geometry\");\r\n        return;\r\n      }\r\n\r\n      let newIcon = {\r\n        url: place.icon,\r\n        size: icon.size,\r\n        origin: icon.origin,\r\n        anchor: icon.anchor,\r\n        scaledSize: icon.scaledSize\r\n      };\r\n\r\n      let placeIcon = setIcon(newIcon);\r\n\r\n      placeMarkers.push(new google.maps.Marker({\r\n        map: sbMap,\r\n        icon: placeIcon,\r\n        title: place.name,\r\n        position: place.geometry.location,\r\n        setMap: sbMap\r\n      }));\r\n\r\n      if (place.geometry.viewport) {\r\n        // Only geocodes have viewport.\r\n        bounds.union(place.geometry.viewport);\r\n      } else {\r\n        bounds.extend(place.geometry.location);\r\n      }\r\n    });\r\n    sbMap.fitBounds(bounds);\r\n  });\r\n};\r\nexport default searchBox;","const createSearchBox = (map) => {\r\n  let localMap = map;\r\n  // Create search box and link it to UI\r\n  const input = document.getElementById('pac-input');\r\n  localMap.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\r\n  const searchBox = new google.maps.places.SearchBox(input);\r\n\r\n  return searchBox;\r\n};\r\n\r\nexport default createSearchBox;\r\n","/*! Clusterize.js - v0.17.6 - 2017-03-05\n* http://NeXTs.github.com/Clusterize.js/\n* Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(name, definition) {\n    if (typeof module != 'undefined') module.exports = definition();\n    else if (typeof define == 'function' && typeof define.amd == 'object') define(definition);\n    else this[name] = definition();\n}('Clusterize', function() {\n  \"use strict\"\n\n  // detect ie9 and lower\n  // https://gist.github.com/padolsey/527683#comment-786682\n  var ie = (function(){\n    for( var v = 3,\n             el = document.createElement('b'),\n             all = el.all || [];\n         el.innerHTML = '<!--[if gt IE ' + (++v) + ']><i><![endif]-->',\n         all[0];\n       ){}\n    return v > 4 ? v : document.documentMode;\n  }()),\n  is_mac = navigator.platform.toLowerCase().indexOf('mac') + 1;\n  var Clusterize = function(data) {\n    if( ! (this instanceof Clusterize))\n      return new Clusterize(data);\n    var self = this;\n\n    var defaults = {\n      rows_in_block: 50,\n      blocks_in_cluster: 4,\n      tag: null,\n      show_no_data_row: true,\n      no_data_class: 'clusterize-no-data',\n      no_data_text: 'No data',\n      keep_parity: true,\n      callbacks: {}\n    }\n\n    // public parameters\n    self.options = {};\n    var options = ['rows_in_block', 'blocks_in_cluster', 'show_no_data_row', 'no_data_class', 'no_data_text', 'keep_parity', 'tag', 'callbacks'];\n    for(var i = 0, option; option = options[i]; i++) {\n      self.options[option] = typeof data[option] != 'undefined' && data[option] != null\n        ? data[option]\n        : defaults[option];\n    }\n\n    var elems = ['scroll', 'content'];\n    for(var i = 0, elem; elem = elems[i]; i++) {\n      self[elem + '_elem'] = data[elem + 'Id']\n        ? document.getElementById(data[elem + 'Id'])\n        : data[elem + 'Elem'];\n      if( ! self[elem + '_elem'])\n        throw new Error(\"Error! Could not find \" + elem + \" element\");\n    }\n\n    // tabindex forces the browser to keep focus on the scrolling list, fixes #11\n    if( ! self.content_elem.hasAttribute('tabindex'))\n      self.content_elem.setAttribute('tabindex', 0);\n\n    // private parameters\n    var rows = isArray(data.rows)\n        ? data.rows\n        : self.fetchMarkup(),\n      cache = {},\n      scroll_top = self.scroll_elem.scrollTop;\n\n    // append initial data\n    self.insertToDOM(rows, cache);\n\n    // restore the scroll position\n    self.scroll_elem.scrollTop = scroll_top;\n\n    // adding scroll handler\n    var last_cluster = false,\n    scroll_debounce = 0,\n    pointer_events_set = false,\n    scrollEv = function() {\n      // fixes scrolling issue on Mac #3\n      if (is_mac) {\n          if( ! pointer_events_set) self.content_elem.style.pointerEvents = 'none';\n          pointer_events_set = true;\n          clearTimeout(scroll_debounce);\n          scroll_debounce = setTimeout(function () {\n              self.content_elem.style.pointerEvents = 'auto';\n              pointer_events_set = false;\n          }, 50);\n      }\n      if (last_cluster != (last_cluster = self.getClusterNum()))\n        self.insertToDOM(rows, cache);\n      if (self.options.callbacks.scrollingProgress)\n        self.options.callbacks.scrollingProgress(self.getScrollProgress());\n    },\n    resize_debounce = 0,\n    resizeEv = function() {\n      clearTimeout(resize_debounce);\n      resize_debounce = setTimeout(self.refresh, 100);\n    }\n    on('scroll', self.scroll_elem, scrollEv);\n    on('resize', window, resizeEv);\n\n    // public methods\n    self.destroy = function(clean) {\n      off('scroll', self.scroll_elem, scrollEv);\n      off('resize', window, resizeEv);\n      self.html((clean ? self.generateEmptyRow() : rows).join(''));\n    }\n    self.refresh = function(force) {\n      if(self.getRowsHeight(rows) || force) self.update(rows);\n    }\n    self.update = function(new_rows) {\n      rows = isArray(new_rows)\n        ? new_rows\n        : [];\n      var scroll_top = self.scroll_elem.scrollTop;\n      // fixes #39\n      if(rows.length * self.options.item_height < scroll_top) {\n        self.scroll_elem.scrollTop = 0;\n        last_cluster = 0;\n      }\n      self.insertToDOM(rows, cache);\n      self.scroll_elem.scrollTop = scroll_top;\n    }\n    self.clear = function() {\n      self.update([]);\n    }\n    self.getRowsAmount = function() {\n      return rows.length;\n    }\n    self.getScrollProgress = function() {\n      return this.options.scroll_top / (rows.length * this.options.item_height) * 100 || 0;\n    }\n\n    var add = function(where, _new_rows) {\n      var new_rows = isArray(_new_rows)\n        ? _new_rows\n        : [];\n      if( ! new_rows.length) return;\n      rows = where == 'append'\n        ? rows.concat(new_rows)\n        : new_rows.concat(rows);\n      self.insertToDOM(rows, cache);\n    }\n    self.append = function(rows) {\n      add('append', rows);\n    }\n    self.prepend = function(rows) {\n      add('prepend', rows);\n    }\n  }\n\n  Clusterize.prototype = {\n    constructor: Clusterize,\n    // fetch existing markup\n    fetchMarkup: function() {\n      var rows = [], rows_nodes = this.getChildNodes(this.content_elem);\n      while (rows_nodes.length) {\n        rows.push(rows_nodes.shift().outerHTML);\n      }\n      return rows;\n    },\n    // get tag name, content tag name, tag height, calc cluster height\n    exploreEnvironment: function(rows, cache) {\n      var opts = this.options;\n      opts.content_tag = this.content_elem.tagName.toLowerCase();\n      if( ! rows.length) return;\n      if(ie && ie <= 9 && ! opts.tag) opts.tag = rows[0].match(/<([^>\\s/]*)/)[1].toLowerCase();\n      if(this.content_elem.children.length <= 1) cache.data = this.html(rows[0] + rows[0] + rows[0]);\n      if( ! opts.tag) opts.tag = this.content_elem.children[0].tagName.toLowerCase();\n      this.getRowsHeight(rows);\n    },\n    getRowsHeight: function(rows) {\n      var opts = this.options,\n        prev_item_height = opts.item_height;\n      opts.cluster_height = 0;\n      if( ! rows.length) return;\n      var nodes = this.content_elem.children;\n      var node = nodes[Math.floor(nodes.length / 2)];\n      opts.item_height = node.offsetHeight;\n      // consider table's border-spacing\n      if(opts.tag == 'tr' && getStyle('borderCollapse', this.content_elem) != 'collapse')\n        opts.item_height += parseInt(getStyle('borderSpacing', this.content_elem), 10) || 0;\n      // consider margins (and margins collapsing)\n      if(opts.tag != 'tr') {\n        var marginTop = parseInt(getStyle('marginTop', node), 10) || 0;\n        var marginBottom = parseInt(getStyle('marginBottom', node), 10) || 0;\n        opts.item_height += Math.max(marginTop, marginBottom);\n      }\n      opts.block_height = opts.item_height * opts.rows_in_block;\n      opts.rows_in_cluster = opts.blocks_in_cluster * opts.rows_in_block;\n      opts.cluster_height = opts.blocks_in_cluster * opts.block_height;\n      return prev_item_height != opts.item_height;\n    },\n    // get current cluster number\n    getClusterNum: function () {\n      this.options.scroll_top = this.scroll_elem.scrollTop;\n      return Math.floor(this.options.scroll_top / (this.options.cluster_height - this.options.block_height)) || 0;\n    },\n    // generate empty row if no data provided\n    generateEmptyRow: function() {\n      var opts = this.options;\n      if( ! opts.tag || ! opts.show_no_data_row) return [];\n      var empty_row = document.createElement(opts.tag),\n        no_data_content = document.createTextNode(opts.no_data_text), td;\n      empty_row.className = opts.no_data_class;\n      if(opts.tag == 'tr') {\n        td = document.createElement('td');\n        // fixes #53\n        td.colSpan = 100;\n        td.appendChild(no_data_content);\n      }\n      empty_row.appendChild(td || no_data_content);\n      return [empty_row.outerHTML];\n    },\n    // generate cluster for current scroll position\n    generate: function (rows, cluster_num) {\n      var opts = this.options,\n        rows_len = rows.length;\n      if (rows_len < opts.rows_in_block) {\n        return {\n          top_offset: 0,\n          bottom_offset: 0,\n          rows_above: 0,\n          rows: rows_len ? rows : this.generateEmptyRow()\n        }\n      }\n      var items_start = Math.max((opts.rows_in_cluster - opts.rows_in_block) * cluster_num, 0),\n        items_end = items_start + opts.rows_in_cluster,\n        top_offset = Math.max(items_start * opts.item_height, 0),\n        bottom_offset = Math.max((rows_len - items_end) * opts.item_height, 0),\n        this_cluster_rows = [],\n        rows_above = items_start;\n      if(top_offset < 1) {\n        rows_above++;\n      }\n      for (var i = items_start; i < items_end; i++) {\n        rows[i] && this_cluster_rows.push(rows[i]);\n      }\n      return {\n        top_offset: top_offset,\n        bottom_offset: bottom_offset,\n        rows_above: rows_above,\n        rows: this_cluster_rows\n      }\n    },\n    renderExtraTag: function(class_name, height) {\n      var tag = document.createElement(this.options.tag),\n        clusterize_prefix = 'clusterize-';\n      tag.className = [clusterize_prefix + 'extra-row', clusterize_prefix + class_name].join(' ');\n      height && (tag.style.height = height + 'px');\n      return tag.outerHTML;\n    },\n    // if necessary verify data changed and insert to DOM\n    insertToDOM: function(rows, cache) {\n      // explore row's height\n      if( ! this.options.cluster_height) {\n        this.exploreEnvironment(rows, cache);\n      }\n      var data = this.generate(rows, this.getClusterNum()),\n        this_cluster_rows = data.rows.join(''),\n        this_cluster_content_changed = this.checkChanges('data', this_cluster_rows, cache),\n        top_offset_changed = this.checkChanges('top', data.top_offset, cache),\n        only_bottom_offset_changed = this.checkChanges('bottom', data.bottom_offset, cache),\n        callbacks = this.options.callbacks,\n        layout = [];\n\n      if(this_cluster_content_changed || top_offset_changed) {\n        if(data.top_offset) {\n          this.options.keep_parity && layout.push(this.renderExtraTag('keep-parity'));\n          layout.push(this.renderExtraTag('top-space', data.top_offset));\n        }\n        layout.push(this_cluster_rows);\n        data.bottom_offset && layout.push(this.renderExtraTag('bottom-space', data.bottom_offset));\n        callbacks.clusterWillChange && callbacks.clusterWillChange();\n        this.html(layout.join(''));\n        this.options.content_tag == 'ol' && this.content_elem.setAttribute('start', data.rows_above);\n        callbacks.clusterChanged && callbacks.clusterChanged();\n      } else if(only_bottom_offset_changed) {\n        this.content_elem.lastChild.style.height = data.bottom_offset + 'px';\n      }\n    },\n    // unfortunately ie <= 9 does not allow to use innerHTML for table elements, so make a workaround\n    html: function(data) {\n      var content_elem = this.content_elem;\n      if(ie && ie <= 9 && this.options.tag == 'tr') {\n        var div = document.createElement('div'), last;\n        div.innerHTML = '<table><tbody>' + data + '</tbody></table>';\n        while((last = content_elem.lastChild)) {\n          content_elem.removeChild(last);\n        }\n        var rows_nodes = this.getChildNodes(div.firstChild.firstChild);\n        while (rows_nodes.length) {\n          content_elem.appendChild(rows_nodes.shift());\n        }\n      } else {\n        content_elem.innerHTML = data;\n      }\n    },\n    getChildNodes: function(tag) {\n        var child_nodes = tag.children, nodes = [];\n        for (var i = 0, ii = child_nodes.length; i < ii; i++) {\n            nodes.push(child_nodes[i]);\n        }\n        return nodes;\n    },\n    checkChanges: function(type, value, cache) {\n      var changed = value != cache[type];\n      cache[type] = value;\n      return changed;\n    }\n  }\n\n  // support functions\n  function on(evt, element, fnc) {\n    return element.addEventListener ? element.addEventListener(evt, fnc, false) : element.attachEvent(\"on\" + evt, fnc);\n  }\n  function off(evt, element, fnc) {\n    return element.removeEventListener ? element.removeEventListener(evt, fnc, false) : element.detachEvent(\"on\" + evt, fnc);\n  }\n  function isArray(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  }\n  function getStyle(prop, elem) {\n    return window.getComputedStyle ? window.getComputedStyle(elem)[prop] : elem.currentStyle[prop];\n  }\n\n  return Clusterize;\n}));","import {icon, clusterOptions} from './options';\r\nimport Clusterize from 'clusterize.js';\r\n\r\nconst getData = (map, data, markers) => {\r\n\r\n  let localMap = map;\r\n  let localData = typeof data !== \"string\" ? \"/datasets/\" + data.toString() : \"/datasets/\" + data;\r\n//  let clusterize = new Clusterize({\r\n//    rows: 'test',\r\n//    scrollId: 'scrollArea',\r\n//    contentId: 'contentArea'\r\n//  });\r\n\r\n\r\n  if(isJSON(localData)) {\r\n    fetch(localData)\r\n      .then((response) => response.json())\r\n      .then(function (dataset) {\r\n\r\n        // add locations\r\n        dataset.map((markerPosition) => {\r\n          if (!markerPosition.latitude || !markerPosition.longitude) {\r\n            console.log('meh');\r\n          }\r\n          else {\r\n            let location = new google.maps.LatLng({lat: markerPosition.latitude, lng: markerPosition.longitude});\r\n\r\n            const marker = new google.maps.Marker({\r\n              position: location,\r\n              map: localMap,\r\n              icon: icon,\r\n              title: markerPosition.user_id.toString(),\r\n              label: markerPosition.full_name.toString()\r\n            });\r\n            markers.push(marker);\r\n          }\r\n        });\r\n      // create MarkerClusterer\r\n      const markerCluster = new MarkerClusterer(localMap, markers, clusterOptions);\r\n\r\n      localMap.addListener('bounds_changed', buildList());\r\n\r\n      function buildList() {\r\n\t\t    if(clusterize){ \r\n\t\t\t\t\tclusterize.clear();\r\n\t\t\t\t}\r\n\t\t\t\tlet listArray = [];\r\n\t\t\t\tlet markup = [];\r\n\r\n        markers.map((i) => {\r\n          if (localMap.getBounds().contains(i.getPosition())) {\r\n          \tmarkup.push('<tr><td>' + i.label + '</td><td>' + '<td/><td>' + i.title + '</td></tr>');\r\n\t\t\t\t\t\tlistArray.push(markup.join(''));\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet clusterize = new Clusterize({\r\n\t\t\t\t\trows: listArray,\r\n\t\t\t\t\tscrollId: 'scrollArea',\r\n\t\t\t\t\tcontentId: 'contentArea',\r\n\t\t\t\t});\r\n\t\t\t\t//let userRow = ;\r\n        //clusterize.append(userRow);\r\n        clusterize.update(listArray);\r\n      }\r\n\r\n    })\r\n    .catch((err) => {\r\n      if (err) throw err\r\n    });\r\n  }\r\n};\r\n\r\nconst isJSON = (dataset) => {\r\n  try {\r\n    JSON.stringify(dataset);\r\n    return true;\r\n  }\r\n  catch(err) {\r\n    console.error('Data is not JSON format!');\r\n    return false;\r\n  }\r\n};\r\nexport default getData;\r\n\r\n\r\n","import createMap from './createMap';\nimport defineCenter from './defineCenter';\nimport searchBox from './searchBox';\nimport createSearchBox from './createSearchBox';\nimport fetchData from './fetchData';\nimport setGoogleMaps from './setGoogleMaps';\nimport {\n  icon,\n  mapOptions,\n  clusterOptions,\n  setIcon,\n  addCenterToOptions\n} from './options';\n\n// Map center\nconst london = defineCenter(51.521723, -0.134581);\naddCenterToOptions(london);\n\n// Map\nlet map = createMap();\n\n// Search Box\nconst sBox = createSearchBox(map);\n\n// Places markers\nlet placeMarkers = [];\n\n// Places holder\nlet places;\n\n// Markers holder\nlet markers = [];\n\nconst initialize = (data) => {\n  // fetch dataset\n  fetchData(map, data, markers);\n\n  // Create Search Box\n  searchBox(map, places, sBox, placeMarkers, icon, setIcon);\n\n};\n\nexport default initialize;\n\n\nconst listTag = document.createElement('div');\n","// Import styles (injected into head)\r\n\r\n// Import modules\r\nimport setGoogleMaps from './components/setGoogleMaps';\r\nimport initialize from './components/maps';\r\n\r\nconst addElement = () => {\r\n  // create map div\r\n  // let mapDiv        = document.createElement('div');\r\n  //     mapDiv.id     = 'map';\r\n\r\n  // create search box input\r\n  // let searchBox             = document.createElement('input');\r\n  //     searchBox.id          = 'pac-input';\r\n  //     searchBox.type        = 'text';\r\n  //     searchBox.placeholder = 'Search Box';\r\n\r\n  let element           = document.createElement('script');\r\n      element.innerHTML = initialize(\"coordinates.json\");\r\n\r\n\r\n};\r\n\r\ngoogle.maps.event.addDomListener(window, \"load\", addElement);\r\n"],"names":["Symbol","id","width","height","fill","marker_svg","window","btoa","p","icon","google","maps","Size","Point","mapOptions","MapTypeId","ROADMAP","clusterStyles","clusterOptions","setIcon","newIcon","addCenterToOptions","center","createMap","Map","document","getElementById","defineCenter","lat","lng","LatLng","parseFloat","toFixed","searchBox","map","places","sBox","placeMarkers","sbMap","addListener","setBounds","getBounds","getPlaces","length","forEach","marker","setMap","bounds","LatLngBounds","place","geometry","log","size","origin","anchor","scaledSize","placeIcon","push","Marker","name","location","viewport","union","extend","fitBounds","createSearchBox","localMap","input","controls","ControlPosition","TOP_LEFT","SearchBox","definition","module","ie","v","el","createElement","all","innerHTML","documentMode","is_mac","navigator","platform","toLowerCase","indexOf","Clusterize","data","self","defaults","options","i","option","elems","elem","Error","content_elem","hasAttribute","setAttribute","rows","isArray","fetchMarkup","cache","scroll_top","scroll_elem","scrollTop","insertToDOM","last_cluster","scroll_debounce","pointer_events_set","scrollEv","style","pointerEvents","setTimeout","getClusterNum","callbacks","scrollingProgress","getScrollProgress","resize_debounce","resizeEv","refresh","destroy","clean","html","generateEmptyRow","join","force","getRowsHeight","update","new_rows","item_height","clear","getRowsAmount","add","where","_new_rows","concat","append","prepend","prototype","rows_nodes","getChildNodes","shift","outerHTML","opts","content_tag","tagName","tag","match","children","prev_item_height","cluster_height","nodes","node","Math","floor","offsetHeight","getStyle","parseInt","marginTop","marginBottom","max","block_height","rows_in_block","rows_in_cluster","blocks_in_cluster","show_no_data_row","empty_row","no_data_content","createTextNode","no_data_text","td","className","no_data_class","colSpan","appendChild","cluster_num","rows_len","items_start","items_end","top_offset","bottom_offset","this_cluster_rows","rows_above","class_name","clusterize_prefix","exploreEnvironment","generate","this_cluster_content_changed","checkChanges","top_offset_changed","only_bottom_offset_changed","layout","keep_parity","renderExtraTag","clusterWillChange","clusterChanged","lastChild","div","last","removeChild","firstChild","child_nodes","ii","type","value","changed","on","evt","element","fnc","addEventListener","attachEvent","off","removeEventListener","detachEvent","arr","Object","toString","call","prop","getComputedStyle","currentStyle","getData","markers","localData","isJSON","then","response","json","dataset","markerPosition","latitude","longitude","user_id","full_name","markerCluster","MarkerClusterer","buildList","clusterize","listArray","markup","contains","getPosition","label","title","catch","err","stringify","error","london","initialize","listTag","addElement","event","addDomListener"],"mappings":"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"}