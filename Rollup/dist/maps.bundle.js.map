{"version":3,"file":"maps.bundle.js","sources":["../src/components/searchBox/createSearchBox.js","../src/components/searchBox/searchBox.js","../src/components/map/svgMarker.js","../src/components/map/options.js","../src/components/buildList/buildList.js","../node_modules/clusterize.js/clusterize.js","../src/components/fetchData/checkData.js","../src/components/fetchData/fetchData.js","../src/components/map/createMap.js","../src/components/map/defineCenter.js","../src/components/map/map.js","../src/index.js"],"sourcesContent":["const createSearchBox = (map) => {\r\n  let localMap = map;\r\n  // Create search box and link it to UI\r\n  const input = document.getElementById('pac-input');\r\n  localMap.controls[google.maps.ControlPosition.TOP_LEFT].push(input);\r\n  const searchBox = new google.maps.places.SearchBox(input);\r\n\r\n  return searchBox;\r\n};\r\n\r\nexport default createSearchBox;\r\n","const searchBox = (map, places, sBox, placeMarkers, icon, setIcon) => {\r\n\r\n\t// Bias searchbox results towards current map's viewport\r\n  map.addListener('bounds_changed', function() {\r\n    sBox.setBounds(map.getBounds());\r\n  });\r\n\r\n  // Listen for the event fired when the user selects a prediction and retrieve\r\n  // more details for that place.\r\n  sBox.addListener('places_changed', function() {\r\n    places = sBox.getPlaces();\r\n    if (places.length == 0) {\r\n      return;\r\n    }\r\n\r\n    // Clear out the old markers.\r\n    placeMarkers.forEach(function(marker) {\r\n      marker.setMap(null);\r\n    });\r\n    placeMarkers = [];\r\n\r\n    // For each place, get the icon, name and location.\r\n    let bounds = new google.maps.LatLngBounds();\r\n    places.forEach(function(place) {\r\n      if (!place.geometry) {\r\n        console.log(\"Returned place contains no geometry\");\r\n        return;\r\n      }\r\n\r\n      let newIcon = {\r\n        url: place.icon,\r\n        size: icon.size,\r\n        origin: icon.origin,\r\n        anchor: icon.anchor,\r\n        scaledSize: icon.scaledSize\r\n      };\r\n\r\n      let placeIcon = setIcon(newIcon);\r\n\r\n      placeMarkers.push(new google.maps.Marker({\r\n        map: map,\r\n        icon: placeIcon,\r\n        title: place.name,\r\n        position: place.geometry.location,\r\n        setMap: map\r\n      }));\r\n\r\n      if (place.geometry.viewport) {\r\n        // Only geocodes have viewport.\r\n        bounds.union(place.geometry.viewport);\r\n      } else {\r\n        bounds.extend(place.geometry.location);\r\n      }\r\n    });\r\n    map.fitBounds(bounds);\r\n  });\r\n};\r\nexport default searchBox;\r\n","// Cluster markers SVG\r\nconst Symbol = (id, width, height, fill) => {\r\n  const marker_svg = {\r\n    marker: {\r\n      p: 'M244.31,0C256.87,2.49,269.59,4.38,282,7.58c35.11,9.1,65.15,27.29,90.44,53.07C401.19,90,419.56,125,427,165.51q12.58,68.25-18.92,130.11Q319.47,469.54,230.64,643.36c-.73,1.42-1.59,2.78-2.79,4.87-1.41-2.43-2.5-4.14-3.42-5.93C165.11,526,104.62,410.27,46.93,293.17,8.94,216.08,18.43,141.32,71.6,74c34-43,80.17-66.6,134.87-72.86A44.62,44.62,0,0,0,211.37,0Z',\r\n      v: '0 0 430.62 648.23'\r\n    }\r\n  };\r\n  return ('data:image/svg+xml;base64,' + window.btoa('<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"' + height + '\" viewBox=\"0 0 430.62 648.23\" width=\"' + width + '\" ><g><path fill=\"' + fill + '\" d=\"' + marker_svg[id].p + '\" /></g></svg>'));\r\n};\r\n\r\nexport default Symbol;","import Symbol from './svgMarker';\r\n\r\n// Icon\r\nlet icon = {\r\n  url: Symbol('marker', 25, 25, '#f16667'),\r\n  size: new google.maps.Size(71, 71),\r\n  origin: new google.maps.Point(0, 0),\r\n  anchor: new google.maps.Point(17, 34),\r\n  scaledSize: new google.maps.Size(25, 25)\r\n};\r\n\r\n// Map options\r\nlet mapOptions = {\r\n  zoom: 4,\r\n  center: null,\r\n  mapTypeId: google.maps.MapTypeId.ROADMAP\r\n};\r\n\r\n// Cluster markers style\r\nconst clusterStyles = [\r\n  {\r\n    anchor: [13, 35],\r\n    textColor: 'white',\r\n    textSize: '16',\r\n    url: Symbol('marker', 75, 75, '#f16667'),\r\n    height: 75,\r\n    width: 75\r\n  },\r\n  {\r\n    anchor: [20, 42],\r\n    textColor: 'white',\r\n    textSize: '18',\r\n    url: Symbol('marker', 100, 100, '#f16667'),\r\n    height: 100,\r\n    width: 100\r\n  },\r\n  {\r\n    anchor: [20, 43.5],\r\n    textColor: 'white',\r\n    textSize: '24',\r\n    url: Symbol('marker', 125, 125, '#f16667'),\r\n    height: 125,\r\n    width: 125\r\n  }\r\n];\r\n\r\n// Cluster options\r\nconst clusterOptions = {\r\n  maxZoom: 15,\r\n  gridSize: 75,\r\n  styles: clusterStyles\r\n};\r\n\r\n// Set new icon\r\nconst setIcon = (newIcon) => {\r\n  icon = newIcon;\r\n  return icon\r\n};\r\n\r\nconst addCenterToOptions = (center) => {\r\n  mapOptions.center = center;\r\n};\r\n\r\nexport {\r\n  icon,\r\n  mapOptions,\r\n  clusterOptions,\r\n  setIcon,\r\n  addCenterToOptions\r\n}","const buildList = (clusterize, listArray, markers, localMap) => {\r\n  listArray = [];\r\n  clusterize.clear();\r\n  markers.map((i) => {\r\n    if (localMap.getBounds().contains(i.getPosition())) {\r\n      listArray.push('<tr><td>' + i.userName + '</td><td>' + '<td/><td>' + i.userID + '</td></tr>');\t\r\n    }\r\n  })\r\n  clusterize.update(listArray);\r\n  clusterize.refresh();\r\n};\r\nexport default buildList;","/*! Clusterize.js - v0.17.6 - 2017-03-05\n* http://NeXTs.github.com/Clusterize.js/\n* Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(name, definition) {\n    if (typeof module != 'undefined') module.exports = definition();\n    else if (typeof define == 'function' && typeof define.amd == 'object') define(definition);\n    else this[name] = definition();\n}('Clusterize', function() {\n  \"use strict\"\n\n  // detect ie9 and lower\n  // https://gist.github.com/padolsey/527683#comment-786682\n  var ie = (function(){\n    for( var v = 3,\n             el = document.createElement('b'),\n             all = el.all || [];\n         el.innerHTML = '<!--[if gt IE ' + (++v) + ']><i><![endif]-->',\n         all[0];\n       ){}\n    return v > 4 ? v : document.documentMode;\n  }()),\n  is_mac = navigator.platform.toLowerCase().indexOf('mac') + 1;\n  var Clusterize = function(data) {\n    if( ! (this instanceof Clusterize))\n      return new Clusterize(data);\n    var self = this;\n\n    var defaults = {\n      rows_in_block: 50,\n      blocks_in_cluster: 4,\n      tag: null,\n      show_no_data_row: true,\n      no_data_class: 'clusterize-no-data',\n      no_data_text: 'No data',\n      keep_parity: true,\n      callbacks: {}\n    }\n\n    // public parameters\n    self.options = {};\n    var options = ['rows_in_block', 'blocks_in_cluster', 'show_no_data_row', 'no_data_class', 'no_data_text', 'keep_parity', 'tag', 'callbacks'];\n    for(var i = 0, option; option = options[i]; i++) {\n      self.options[option] = typeof data[option] != 'undefined' && data[option] != null\n        ? data[option]\n        : defaults[option];\n    }\n\n    var elems = ['scroll', 'content'];\n    for(var i = 0, elem; elem = elems[i]; i++) {\n      self[elem + '_elem'] = data[elem + 'Id']\n        ? document.getElementById(data[elem + 'Id'])\n        : data[elem + 'Elem'];\n      if( ! self[elem + '_elem'])\n        throw new Error(\"Error! Could not find \" + elem + \" element\");\n    }\n\n    // tabindex forces the browser to keep focus on the scrolling list, fixes #11\n    if( ! self.content_elem.hasAttribute('tabindex'))\n      self.content_elem.setAttribute('tabindex', 0);\n\n    // private parameters\n    var rows = isArray(data.rows)\n        ? data.rows\n        : self.fetchMarkup(),\n      cache = {},\n      scroll_top = self.scroll_elem.scrollTop;\n\n    // append initial data\n    self.insertToDOM(rows, cache);\n\n    // restore the scroll position\n    self.scroll_elem.scrollTop = scroll_top;\n\n    // adding scroll handler\n    var last_cluster = false,\n    scroll_debounce = 0,\n    pointer_events_set = false,\n    scrollEv = function() {\n      // fixes scrolling issue on Mac #3\n      if (is_mac) {\n          if( ! pointer_events_set) self.content_elem.style.pointerEvents = 'none';\n          pointer_events_set = true;\n          clearTimeout(scroll_debounce);\n          scroll_debounce = setTimeout(function () {\n              self.content_elem.style.pointerEvents = 'auto';\n              pointer_events_set = false;\n          }, 50);\n      }\n      if (last_cluster != (last_cluster = self.getClusterNum()))\n        self.insertToDOM(rows, cache);\n      if (self.options.callbacks.scrollingProgress)\n        self.options.callbacks.scrollingProgress(self.getScrollProgress());\n    },\n    resize_debounce = 0,\n    resizeEv = function() {\n      clearTimeout(resize_debounce);\n      resize_debounce = setTimeout(self.refresh, 100);\n    }\n    on('scroll', self.scroll_elem, scrollEv);\n    on('resize', window, resizeEv);\n\n    // public methods\n    self.destroy = function(clean) {\n      off('scroll', self.scroll_elem, scrollEv);\n      off('resize', window, resizeEv);\n      self.html((clean ? self.generateEmptyRow() : rows).join(''));\n    }\n    self.refresh = function(force) {\n      if(self.getRowsHeight(rows) || force) self.update(rows);\n    }\n    self.update = function(new_rows) {\n      rows = isArray(new_rows)\n        ? new_rows\n        : [];\n      var scroll_top = self.scroll_elem.scrollTop;\n      // fixes #39\n      if(rows.length * self.options.item_height < scroll_top) {\n        self.scroll_elem.scrollTop = 0;\n        last_cluster = 0;\n      }\n      self.insertToDOM(rows, cache);\n      self.scroll_elem.scrollTop = scroll_top;\n    }\n    self.clear = function() {\n      self.update([]);\n    }\n    self.getRowsAmount = function() {\n      return rows.length;\n    }\n    self.getScrollProgress = function() {\n      return this.options.scroll_top / (rows.length * this.options.item_height) * 100 || 0;\n    }\n\n    var add = function(where, _new_rows) {\n      var new_rows = isArray(_new_rows)\n        ? _new_rows\n        : [];\n      if( ! new_rows.length) return;\n      rows = where == 'append'\n        ? rows.concat(new_rows)\n        : new_rows.concat(rows);\n      self.insertToDOM(rows, cache);\n    }\n    self.append = function(rows) {\n      add('append', rows);\n    }\n    self.prepend = function(rows) {\n      add('prepend', rows);\n    }\n  }\n\n  Clusterize.prototype = {\n    constructor: Clusterize,\n    // fetch existing markup\n    fetchMarkup: function() {\n      var rows = [], rows_nodes = this.getChildNodes(this.content_elem);\n      while (rows_nodes.length) {\n        rows.push(rows_nodes.shift().outerHTML);\n      }\n      return rows;\n    },\n    // get tag name, content tag name, tag height, calc cluster height\n    exploreEnvironment: function(rows, cache) {\n      var opts = this.options;\n      opts.content_tag = this.content_elem.tagName.toLowerCase();\n      if( ! rows.length) return;\n      if(ie && ie <= 9 && ! opts.tag) opts.tag = rows[0].match(/<([^>\\s/]*)/)[1].toLowerCase();\n      if(this.content_elem.children.length <= 1) cache.data = this.html(rows[0] + rows[0] + rows[0]);\n      if( ! opts.tag) opts.tag = this.content_elem.children[0].tagName.toLowerCase();\n      this.getRowsHeight(rows);\n    },\n    getRowsHeight: function(rows) {\n      var opts = this.options,\n        prev_item_height = opts.item_height;\n      opts.cluster_height = 0;\n      if( ! rows.length) return;\n      var nodes = this.content_elem.children;\n      var node = nodes[Math.floor(nodes.length / 2)];\n      opts.item_height = node.offsetHeight;\n      // consider table's border-spacing\n      if(opts.tag == 'tr' && getStyle('borderCollapse', this.content_elem) != 'collapse')\n        opts.item_height += parseInt(getStyle('borderSpacing', this.content_elem), 10) || 0;\n      // consider margins (and margins collapsing)\n      if(opts.tag != 'tr') {\n        var marginTop = parseInt(getStyle('marginTop', node), 10) || 0;\n        var marginBottom = parseInt(getStyle('marginBottom', node), 10) || 0;\n        opts.item_height += Math.max(marginTop, marginBottom);\n      }\n      opts.block_height = opts.item_height * opts.rows_in_block;\n      opts.rows_in_cluster = opts.blocks_in_cluster * opts.rows_in_block;\n      opts.cluster_height = opts.blocks_in_cluster * opts.block_height;\n      return prev_item_height != opts.item_height;\n    },\n    // get current cluster number\n    getClusterNum: function () {\n      this.options.scroll_top = this.scroll_elem.scrollTop;\n      return Math.floor(this.options.scroll_top / (this.options.cluster_height - this.options.block_height)) || 0;\n    },\n    // generate empty row if no data provided\n    generateEmptyRow: function() {\n      var opts = this.options;\n      if( ! opts.tag || ! opts.show_no_data_row) return [];\n      var empty_row = document.createElement(opts.tag),\n        no_data_content = document.createTextNode(opts.no_data_text), td;\n      empty_row.className = opts.no_data_class;\n      if(opts.tag == 'tr') {\n        td = document.createElement('td');\n        // fixes #53\n        td.colSpan = 100;\n        td.appendChild(no_data_content);\n      }\n      empty_row.appendChild(td || no_data_content);\n      return [empty_row.outerHTML];\n    },\n    // generate cluster for current scroll position\n    generate: function (rows, cluster_num) {\n      var opts = this.options,\n        rows_len = rows.length;\n      if (rows_len < opts.rows_in_block) {\n        return {\n          top_offset: 0,\n          bottom_offset: 0,\n          rows_above: 0,\n          rows: rows_len ? rows : this.generateEmptyRow()\n        }\n      }\n      var items_start = Math.max((opts.rows_in_cluster - opts.rows_in_block) * cluster_num, 0),\n        items_end = items_start + opts.rows_in_cluster,\n        top_offset = Math.max(items_start * opts.item_height, 0),\n        bottom_offset = Math.max((rows_len - items_end) * opts.item_height, 0),\n        this_cluster_rows = [],\n        rows_above = items_start;\n      if(top_offset < 1) {\n        rows_above++;\n      }\n      for (var i = items_start; i < items_end; i++) {\n        rows[i] && this_cluster_rows.push(rows[i]);\n      }\n      return {\n        top_offset: top_offset,\n        bottom_offset: bottom_offset,\n        rows_above: rows_above,\n        rows: this_cluster_rows\n      }\n    },\n    renderExtraTag: function(class_name, height) {\n      var tag = document.createElement(this.options.tag),\n        clusterize_prefix = 'clusterize-';\n      tag.className = [clusterize_prefix + 'extra-row', clusterize_prefix + class_name].join(' ');\n      height && (tag.style.height = height + 'px');\n      return tag.outerHTML;\n    },\n    // if necessary verify data changed and insert to DOM\n    insertToDOM: function(rows, cache) {\n      // explore row's height\n      if( ! this.options.cluster_height) {\n        this.exploreEnvironment(rows, cache);\n      }\n      var data = this.generate(rows, this.getClusterNum()),\n        this_cluster_rows = data.rows.join(''),\n        this_cluster_content_changed = this.checkChanges('data', this_cluster_rows, cache),\n        top_offset_changed = this.checkChanges('top', data.top_offset, cache),\n        only_bottom_offset_changed = this.checkChanges('bottom', data.bottom_offset, cache),\n        callbacks = this.options.callbacks,\n        layout = [];\n\n      if(this_cluster_content_changed || top_offset_changed) {\n        if(data.top_offset) {\n          this.options.keep_parity && layout.push(this.renderExtraTag('keep-parity'));\n          layout.push(this.renderExtraTag('top-space', data.top_offset));\n        }\n        layout.push(this_cluster_rows);\n        data.bottom_offset && layout.push(this.renderExtraTag('bottom-space', data.bottom_offset));\n        callbacks.clusterWillChange && callbacks.clusterWillChange();\n        this.html(layout.join(''));\n        this.options.content_tag == 'ol' && this.content_elem.setAttribute('start', data.rows_above);\n        callbacks.clusterChanged && callbacks.clusterChanged();\n      } else if(only_bottom_offset_changed) {\n        this.content_elem.lastChild.style.height = data.bottom_offset + 'px';\n      }\n    },\n    // unfortunately ie <= 9 does not allow to use innerHTML for table elements, so make a workaround\n    html: function(data) {\n      var content_elem = this.content_elem;\n      if(ie && ie <= 9 && this.options.tag == 'tr') {\n        var div = document.createElement('div'), last;\n        div.innerHTML = '<table><tbody>' + data + '</tbody></table>';\n        while((last = content_elem.lastChild)) {\n          content_elem.removeChild(last);\n        }\n        var rows_nodes = this.getChildNodes(div.firstChild.firstChild);\n        while (rows_nodes.length) {\n          content_elem.appendChild(rows_nodes.shift());\n        }\n      } else {\n        content_elem.innerHTML = data;\n      }\n    },\n    getChildNodes: function(tag) {\n        var child_nodes = tag.children, nodes = [];\n        for (var i = 0, ii = child_nodes.length; i < ii; i++) {\n            nodes.push(child_nodes[i]);\n        }\n        return nodes;\n    },\n    checkChanges: function(type, value, cache) {\n      var changed = value != cache[type];\n      cache[type] = value;\n      return changed;\n    }\n  }\n\n  // support functions\n  function on(evt, element, fnc) {\n    return element.addEventListener ? element.addEventListener(evt, fnc, false) : element.attachEvent(\"on\" + evt, fnc);\n  }\n  function off(evt, element, fnc) {\n    return element.removeEventListener ? element.removeEventListener(evt, fnc, false) : element.detachEvent(\"on\" + evt, fnc);\n  }\n  function isArray(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  }\n  function getStyle(prop, elem) {\n    return window.getComputedStyle ? window.getComputedStyle(elem)[prop] : elem.currentStyle[prop];\n  }\n\n  return Clusterize;\n}));","const checkData = (dataset) => {\r\n  try {\r\n    JSON.stringify(dataset);\r\n    return true;\r\n  }\r\n  catch(err) {\r\n    console.error('Data is not JSON format!');\r\n    return false;\r\n  }\r\n};\r\nexport default checkData;","import {icon, clusterOptions} from '../map/options';\r\nimport buildList from '../buildList/buildList';\r\nimport Clusterize from 'clusterize.js';\r\nimport checkData from './checkData';\r\n\r\n\r\nconst getData = (map, data, markers) => {\r\n  let localMap = map;\r\n  let listArray = [];\r\n  let localData = typeof data !== \"string\" ? \"/datasets/\" + data.toString() : \"/datasets/\" + data;\r\n  // create list\r\n\tlet clusterize = new Clusterize({\r\n    rows: null,\r\n    scrollId: 'scrollArea',\r\n    contentId: 'contentArea',\r\n  });\r\n  \r\n  if(checkData(localData)) {\r\n    fetch(localData)\r\n      .then((response) => response.json())\r\n      .then(function (dataset) {\r\n        // add locations\r\n        // check for geocoordinates in dataset\r\n        dataset.map((markerPosition) => {\r\n          if (!markerPosition.latitude || !markerPosition.longitude) {\r\n            console.log('meh');\r\n          }\r\n          else {\r\n            let location = new google.maps.LatLng({lat: markerPosition.latitude, lng: markerPosition.longitude});\r\n            const marker = new google.maps.Marker({\r\n              position: location,\r\n              map: localMap,\r\n              icon: icon,\r\n              userID: markerPosition.user_id,\r\n              userName: markerPosition.full_name\r\n            });\r\n            markers.push(marker);\r\n          }\r\n        });\r\n      // create MarkerClusterer\r\n      const markerCluster = new MarkerClusterer(localMap, markers, clusterOptions);\r\n      // Updates list when viewport changes\r\n      google.maps.event.addListener(localMap, 'bounds_changed', function() {\r\n        buildList(clusterize, listArray, markers, localMap);\r\n      });  \r\n    })\r\n    .catch((err) => {\r\n      if (err) throw err\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport default getData;\r\n\r\n\r\n","import {mapOptions} from './options';\r\n\r\nconst createMap = () => new google.maps.Map(document.getElementById(\"map\"), mapOptions);\r\n\r\nexport default createMap;\r\n\r\n","const defineCenter = (lat, lng) => new google.maps.LatLng(parseFloat(lat).toFixed(6), parseFloat(lng).toFixed(6));\r\n\r\nexport default defineCenter;\r\n","import createSearchBox from '../searchBox/createSearchBox';\nimport searchBox from '../searchBox/searchBox';\nimport fetchData from '../fetchData/fetchData';\nimport createMap from './createMap';\nimport defineCenter from './defineCenter';\nimport setGoogleMaps from './setGoogleMaps';\nimport {\n  icon,\n  mapOptions,\n  clusterOptions,\n  setIcon,\n  addCenterToOptions\n} from './options';\n\n// Map center\nconst london = defineCenter(51.521723, -0.134581);\naddCenterToOptions(london);\n\n// Map\nlet map = createMap();\n\n// Search Box\nconst sBox = createSearchBox(map);\n\n// Places markers\nlet placeMarkers = [];\n\n// Places holder\nlet places;\n\n// Markers holder\nlet markers = [];\n\nconst initialize = (data) => {\n  // fetch dataset\n  fetchData(map, data, markers);\n\n  // Create Search Box\n  searchBox(map, places, sBox, placeMarkers, icon, setIcon);\n\n};\n\nexport default initialize;\n\n\nconst listTag = document.createElement('div');\n","// Import styles (injected into head)\r\n\r\n// Import modules\r\nimport setGoogleMaps from './components/map/setGoogleMaps';\r\nimport initialize from './components/map/map';\r\n\r\nconst addElement = () => {\r\n  // create map div\r\n  // let mapDiv        = document.createElement('div');\r\n  //     mapDiv.id     = 'map';\r\n\r\n  // create search box input\r\n  // let searchBox             = document.createElement('input');\r\n  //     searchBox.id          = 'pac-input';\r\n  //     searchBox.type        = 'text';\r\n  //     searchBox.placeholder = 'Search Box';\r\n\r\n  let element           = document.createElement('script');\r\n      element.innerHTML = initialize(\"coordinates.json\");\r\n\r\n};\r\n\r\ngoogle.maps.event.addDomListener(window, \"load\", addElement);\r\n"],"names":["createSearchBox","map","localMap","input","document","getElementById","controls","google","maps","ControlPosition","TOP_LEFT","push","searchBox","places","SearchBox","sBox","placeMarkers","icon","setIcon","addListener","setBounds","getBounds","getPlaces","length","forEach","marker","setMap","bounds","LatLngBounds","place","geometry","log","newIcon","size","origin","anchor","scaledSize","placeIcon","Marker","name","location","viewport","union","extend","fitBounds","Symbol","id","width","height","fill","marker_svg","window","btoa","p","Size","Point","mapOptions","MapTypeId","ROADMAP","clusterStyles","clusterOptions","addCenterToOptions","center","buildList","clusterize","listArray","markers","clear","i","contains","getPosition","userName","userID","update","refresh","definition","module","ie","v","el","createElement","all","innerHTML","documentMode","is_mac","navigator","platform","toLowerCase","indexOf","Clusterize","data","self","defaults","options","option","elems","elem","Error","content_elem","hasAttribute","setAttribute","rows","isArray","fetchMarkup","cache","scroll_top","scroll_elem","scrollTop","insertToDOM","last_cluster","scroll_debounce","pointer_events_set","scrollEv","style","pointerEvents","setTimeout","getClusterNum","callbacks","scrollingProgress","getScrollProgress","resize_debounce","resizeEv","destroy","clean","html","generateEmptyRow","join","force","getRowsHeight","new_rows","item_height","getRowsAmount","add","where","_new_rows","concat","append","prepend","prototype","rows_nodes","getChildNodes","shift","outerHTML","opts","content_tag","tagName","tag","match","children","prev_item_height","cluster_height","nodes","node","Math","floor","offsetHeight","getStyle","parseInt","marginTop","marginBottom","max","block_height","rows_in_block","rows_in_cluster","blocks_in_cluster","show_no_data_row","empty_row","no_data_content","createTextNode","no_data_text","td","className","no_data_class","colSpan","appendChild","cluster_num","rows_len","items_start","items_end","top_offset","bottom_offset","this_cluster_rows","rows_above","class_name","clusterize_prefix","exploreEnvironment","generate","this_cluster_content_changed","checkChanges","top_offset_changed","only_bottom_offset_changed","layout","keep_parity","renderExtraTag","clusterWillChange","clusterChanged","lastChild","div","last","removeChild","firstChild","child_nodes","ii","type","value","changed","on","evt","element","fnc","addEventListener","attachEvent","off","removeEventListener","detachEvent","arr","Object","toString","call","prop","getComputedStyle","currentStyle","checkData","dataset","stringify","err","error","getData","localData","then","response","json","markerPosition","latitude","longitude","LatLng","lat","lng","user_id","full_name","markerCluster","MarkerClusterer","event","catch","createMap","Map","defineCenter","parseFloat","toFixed","london","initialize","listTag","addElement","addDomListener"],"mappings":"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"}